"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4687],{4687:(be,x,u)=>{u.r(x),u.d(x,{RequestServiceDetailPageModule:()=>Ce});var E=u(177),T=u(9417),c=u(9465),f=u(7625),m=u(467),$=u(7762),j=u(5312),I=u(3801),S=u(5454),G=u(6471),y=u(9946),N=u(6431),A=u(6539),X=u(2313),g=u(9136),h=u(2678),C=u(3588),R=u(8833),e=u(4438),V=u(4842);const O=(n,s)=>[n,s],U=n=>({$implicit:n});function J(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2,"Th\u1eddi gian h\u1eb9n s\u1ea1c"),e.k0s(),e.j41(3,"td")(4,"b"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(5),e.E5c("",t.APP_FUNC_FormatDate(t.requestService.ExecutionDate+" "+t.requestService.ExecutionTime,"HH:mm")," - ",t.APP_FUNC_FormatDate(t.requestService.ExecutionDate+" "+t.requestService.ExecutionTimeTo,"HH:mm"),", ",t.APP_FUNC_FormatDate(t.requestService.ExecutionDate+" "+t.requestService.ExecutionTime,"DD/MM/YYYY"),"")}}function B(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2,"\u0110i\u1ec3m \u0111\xf3n"),e.k0s(),e.j41(3,"td")(4,"b"),e.EFF(5),e.k0s()()(),e.j41(6,"tr")(7,"td"),e.EFF(8,"\u0110i\u1ec3m tr\u1ea3"),e.k0s(),e.j41(9,"td")(10,"b"),e.EFF(11),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(5),e.JRh(t.requestService.RequestAddress),e.R7$(6),e.JRh(t.requestService.DestAddress)}}function Y(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"Address")),e.R7$(4),e.JRh(t.requestService.RequestAddress)}}function L(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){let t;const r=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,3,"DistanceRescure")),e.R7$(4),e.Lme("",null!==(t=r.requestService.Distance)&&void 0!==t?t:r.getDistance(),"",null!==(t=r.requestService.Unit)&&void 0!==t?t:"km","")}}function w(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"ChargingPackage")),e.R7$(4),e.JRh(t.requestService.ChargePackageName)}}function H(n,s){if(1&n&&(e.j41(0,"div",10)(1,"div",18)(2,"div",12)(3,"div",19)(4,"b",20),e.EFF(5,"Nh\xe2n vi\xean th\u1ef1c hi\u1ec7n"),e.k0s()()(),e.nrm(6,"hr",15),e.j41(7,"div",16)(8,"table",17)(9,"tr")(10,"td"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"td")(14,"b"),e.EFF(15),e.k0s()()(),e.j41(16,"tr")(17,"td"),e.EFF(18),e.nI1(19,"translate"),e.k0s(),e.j41(20,"td")(21,"b"),e.EFF(22),e.k0s()()(),e.j41(23,"tr")(24,"td"),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.j41(27,"td")(28,"b"),e.EFF(29),e.k0s()()(),e.j41(30,"tr")(31,"td"),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.j41(34,"td")(35,"b"),e.EFF(36),e.k0s()()()()()()()),2&n){const t=e.XpG(2);e.R7$(11),e.JRh(e.bMT(12,8,"Employe")),e.R7$(4),e.JRh(t.requestService.StaffFullName),e.R7$(3),e.JRh(e.bMT(19,10,"CarBrand")),e.R7$(4),e.JRh(t.requestService.CarBrand),e.R7$(3),e.JRh(e.bMT(26,12,"ModelName")),e.R7$(4),e.JRh(t.requestService.ModelName),e.R7$(3),e.JRh(e.bMT(33,14,"VehicleNumber")),e.R7$(4),e.JRh(t.requestService.VehicleNumber)}}function W(n,s){if(1&n&&(e.j41(0,"div",9)(1,"div",10)(2,"div",24)(3,"h6",25)(4,"b"),e.EFF(5,"Ghi ch\xfa c\u1ee7a kh\xe1ch kh\xe0ng"),e.k0s()(),e.nrm(6,"hr",26),e.j41(7,"div")(8,"b",27),e.EFF(9),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(9),e.JRh(t.requestService.Notes)}}function z(n,s){if(1&n&&(e.j41(0,"div",9)(1,"div",10)(2,"div",24)(3,"h6",25)(4,"b"),e.EFF(5,"L\xfd do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5"),e.k0s()(),e.nrm(6,"hr",26),e.j41(7,"div",28)(8,"b",27),e.EFF(9),e.k0s()(),e.j41(10,"div")(11,"b",27),e.EFF(12),e.k0s()()()()()),2&n){const t=e.XpG(2);e.R7$(9),e.JRh(t.APP_FUNC_FormatDate(t.requestService.CreatedDate)),e.R7$(3),e.JRh(t.requestService.Reason)}}function K(n,s){if(1&n&&(e.j41(0,"div",29)(1,"b",27),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(2),e.JRh(t.requestService.AcceptNotes)}}function Z(n,s){if(1&n&&(e.j41(0,"div",30),e.nrm(1,"ion-img",31),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("src",t.readfile_url+t.requestService.AcceptImages)}}function Q(n,s){if(1&n&&(e.j41(0,"div",9)(1,"div",10)(2,"div",24)(3,"h6",25)(4,"b"),e.EFF(5,"Ghi ch\xfa x\xe1c nh\u1eadn d\u1ecbch v\u1ee5"),e.k0s()(),e.nrm(6,"hr",26),e.DNE(7,K,3,1,"div",29)(8,Z,2,1,"div",30),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(7),e.vxM(7,t.requestService.AcceptNotes?7:-1),e.R7$(),e.vxM(8,t.requestService.AcceptImages?8:-1)}}function ee(n,s){if(1&n&&(e.j41(0,"div",29)(1,"b",27),e.EFF(2),e.k0s()()),2&n){const t=e.XpG(3);e.R7$(2),e.JRh(t.requestService.CancelReason)}}function te(n,s){if(1&n&&(e.j41(0,"div",30),e.nrm(1,"ion-img",31),e.k0s()),2&n){const t=e.XpG(3);e.R7$(),e.Y8G("src",t.readfile_url+t.requestService.CancelReasonImages)}}function ie(n,s){if(1&n&&(e.j41(0,"div",9)(1,"div",10)(2,"div",24)(3,"h6",25)(4,"b"),e.EFF(5,"L\xfd do t\u1eeb ch\u1ed1i/h\u1ee7y d\u1ecbch v\u1ee5"),e.k0s()(),e.nrm(6,"hr",26),e.DNE(7,ee,3,1,"div",29)(8,te,2,1,"div",30),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(7),e.vxM(7,t.requestService.CancelReason?7:-1),e.R7$(),e.vxM(8,t.requestService.CancelReasonImages?8:-1)}}function ne(n,s){if(1&n&&(e.j41(0,"ion-select-option",39),e.EFF(1),e.k0s()),2&n){const t=s.$implicit;e.Y8G("value",t.RequestServiceCancelReasonId),e.R7$(),e.JRh(t.Reason)}}function oe(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",36)(1,"ion-item",37)(2,"ion-textarea",43),e.bIt("ionChange",function(o){e.eBV(t);const i=e.XpG(3);return e.Njj(i.changeReason(o))}),e.k0s()()()}if(2&n){const t=e.XpG(3);e.R7$(2),e.Y8G("autoGrow",!0)("value",t.dataForm.Reason)}}function re(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",32)(6,"ion-button",33),e.bIt("click",function(){e.eBV(t),e.XpG();const o=e.sdS(55);return e.Njj(null==o?null:o.dismiss())}),e.nrm(7,"ion-icon",34),e.k0s()()()(),e.j41(8,"div",35)(9,"div",36)(10,"ion-item",37)(11,"ion-select",38),e.nI1(12,"translate"),e.nI1(13,"translate"),e.bIt("ionChange",function(o){e.eBV(t);const i=e.XpG(2);return e.Njj(i.changeRequestServiceCancelReason(o))}),e.Z7z(14,ne,2,2,"ion-select-option",39,e.fX1),e.j41(16,"ion-select-option",39),e.EFF(17,"Kh\xe1c"),e.k0s()()()(),e.DNE(18,oe,3,2,"div",36),e.k0s(),e.j41(19,"ion-footer")(20,"div",40)(21,"ion-button",41),e.bIt("click",function(){e.eBV(t),e.XpG();const o=e.sdS(55);return e.Njj(null==o?null:o.dismiss())}),e.j41(22,"ion-label"),e.EFF(23),e.nI1(24,"translate"),e.k0s()(),e.j41(25,"ion-button",42),e.bIt("click",function(o){e.eBV(t),e.XpG();const i=e.sdS(55),a=e.XpG();return e.Njj(a.declineService(o,i))}),e.j41(26,"ion-label"),e.EFF(27),e.nI1(28,"translate"),e.k0s()()()()}if(2&n){const t=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,9,"CancelService")),e.R7$(8),e.Y8G("value",t.dataForm.ReasonId)("cancelText",e.bMT(12,11,"Close"))("okText",e.bMT(13,13,"Apply")),e.R7$(3),e.Dyx(t.requestServiceCancelReasons),e.R7$(2),e.Y8G("value",-1),e.R7$(2),e.vxM(18,-1==t.dataForm.ReasonId?18:-1),e.R7$(5),e.JRh(e.bMT(24,15,"Cancel")),e.R7$(2),e.Y8G("disabled",t.declineService_Disabled),e.R7$(2),e.JRh(e.bMT(28,17,"Confirm"))}}function ae(n,s){if(1&n&&(e.j41(0,"div",47)(1,"ion-item",49)(2,"ion-radio",50),e.eu8(3,51),e.k0s()()()),2&n){const t=s.$implicit;e.XpG(3);const r=e.sdS(9);e.R7$(2),e.Y8G("value",t.UserId),e.R7$(),e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(3,U,t))}}function se(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",44),e.EFF(3,"Ch\u1ecdn nh\xe2n vi\xean"),e.k0s()()(),e.j41(4,"ion-content",45)(5,"ion-radio-group",46),e.bIt("ionChange",function(o){e.eBV(t);const i=e.XpG(2);return e.Njj(i.changeStaffUserId(o))}),e.Z7z(6,ae,4,5,"div",47,e.fX1),e.k0s()(),e.j41(8,"ion-footer")(9,"div",40)(10,"ion-button",41),e.bIt("click",function(){e.eBV(t),e.XpG();const o=e.sdS(58);return e.Njj(null==o?null:o.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"ion-button",48),e.bIt("click",function(o){e.eBV(t),e.XpG();const i=e.sdS(58),a=e.XpG();return e.Njj(a.assignService(o,i))}),e.j41(15,"ion-label"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()()}if(2&n){const t=e.XpG(2);e.R7$(5),e.Y8G("value",t.dataForm.StaffUserId),e.R7$(),e.Dyx(t.staffVehicleChargingWorkings),e.R7$(6),e.JRh(e.bMT(13,4,"Cancel")),e.R7$(2),e.Y8G("disabled",t.assignService_Disabled),e.R7$(2),e.JRh(e.bMT(17,6,"Confirm"))}}function le(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-footer",23)(1,"div",52)(2,"ion-button",53),e.bIt("click",function(){e.eBV(t),e.XpG();const o=e.sdS(55);return e.Njj(null==o?null:o.present())}),e.j41(3,"ion-label"),e.EFF(4,"T\u1eeb ch\u1ed1i"),e.k0s()(),e.j41(5,"ion-button",54),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.receiveService())}),e.j41(6,"ion-label"),e.EFF(7,"Nh\u1eadn d\u1ecbch v\u1ee5"),e.k0s()()()()}}function ce(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-footer",23)(1,"div",52)(2,"ion-button",54),e.bIt("click",function(o){e.eBV(t),e.XpG();const i=e.sdS(58),a=e.XpG();return a.changeRequestServiceId(o,a.requestService.RequestServiceId),e.Njj(null==i?null:i.present())}),e.j41(3,"ion-label"),e.EFF(4,"\u0110i\u1ec1u ph\u1ed1i d\u1ecbch v\u1ee5"),e.k0s()()()()}}function ue(n,s){if(1&n){const t=e.RV6();e.j41(0,"ion-content")(1,"ion-refresher",6),e.bIt("ionRefresh",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.onIonRefresher(o))}),e.nrm(2,"ion-refresher-content"),e.k0s(),e.nrm(3,"div",7),e.j41(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"div",13),e.EFF(10),e.k0s(),e.j41(11,"ion-text",14),e.EFF(12),e.k0s()(),e.nrm(13,"hr",15),e.j41(14,"div",16)(15,"table",17)(16,"tr")(17,"td"),e.EFF(18,"Ng\u01b0\u1eddi y\xeau c\u1ea7u"),e.k0s(),e.j41(19,"td")(20,"b"),e.EFF(21),e.k0s()()(),e.j41(22,"tr")(23,"td"),e.EFF(24,"Th\u1eddi gian g\u1eedi y\xeau c\u1ea7u"),e.k0s(),e.j41(25,"td")(26,"b"),e.EFF(27),e.k0s()()(),e.DNE(28,J,6,3,"tr")(29,B,12,2)(30,Y,7,4),e.k0s()()()(),e.j41(31,"div",10)(32,"div",18)(33,"div",12)(34,"div",19)(35,"b",20),e.EFF(36,"Chi ti\u1ebft d\u1ecbch v\u1ee5"),e.k0s()()(),e.nrm(37,"hr",15),e.j41(38,"div",16)(39,"table",17),e.DNE(40,L,7,5,"tr")(41,w,7,4),e.j41(42,"tr")(43,"td"),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"td")(47,"b"),e.EFF(48),e.k0s()()()()()()(),e.DNE(49,H,37,16,"div",10),e.k0s(),e.DNE(50,W,10,1,"div",9)(51,z,13,2,"div",9)(52,Q,9,2,"div",9)(53,ie,9,2,"div",9),e.k0s(),e.j41(54,"ion-modal",21,1),e.bIt("didPresent",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.onModalDeclineServiceDidPresent(o))}),e.DNE(56,re,29,19,"ng-template"),e.k0s(),e.j41(57,"ion-modal",22,2),e.bIt("didPresent",function(o){e.eBV(t);const i=e.XpG();return e.Njj(i.onModalAssignServiceDidPresent(o))}),e.DNE(59,se,18,8,"ng-template"),e.k0s()(),e.DNE(60,le,8,0,"ion-footer",23)(61,ce,5,0)}if(2&n){let t,r,o;const i=e.XpG();e.R7$(10),e.JRh(i.requestService.ServiceName),e.R7$(),e.Y8G("color",i.requestService.VRequestWaitConfirmStatus?i.APP_FUNC_GetColor_VRequestWaitConfirmStatus(i.requestService.VRequestWaitConfirmStatus):i.APP_FUNC_GetColor_VRequestStatus(i.requestService.VRequestStatus)),e.R7$(),e.JRh(null!==(t=i.requestService.VRequestWaitConfirmStatusName)&&void 0!==t?t:i.requestService.VRequestStatusName),e.R7$(9),e.JRh(i.requestService.CustomerFullname),e.R7$(6),e.JRh(i.APP_FUNC_FormatDate(i.requestService.RequestDate,"HH:mm, DD/MM/YYYY")),e.R7$(),e.vxM(28,i.requestService.ExecutionDate&&i.requestService.ExecutionTime&&i.requestService.ExecutionTimeTo?28:-1),e.R7$(),e.vxM(29,i.requestService.VServiceType==i.v_service_type.CuuHo?29:30),e.R7$(11),e.vxM(40,i.requestService.VServiceType==i.v_service_type.CuuHo?40:41),e.R7$(4),e.JRh(e.bMT(45,16,"PayValue")),e.R7$(4),e.SpI("",i.APP_FUNC_FormatMoney(null!==(r=i.requestService.PayValue)&&void 0!==r?r:0),"\u0111"),e.R7$(),e.vxM(49,i.requestService.StaffUserId?49:-1),e.R7$(),e.vxM(50,i.requestService.Notes?50:-1),e.R7$(),e.vxM(51,i.requestService.VRequestWaitConfirmStatus==i.v_request_wait_confirm_status.TuChoiDichVu?51:-1),e.R7$(),e.vxM(52,i.requestService.AcceptNotes||i.requestService.AcceptImages?52:-1),e.R7$(),e.vxM(53,i.requestService.CancelReason||i.requestService.CancelReasonImages?53:-1),e.R7$(7),e.vxM(60,e.l_i(18,O,i.v_request_wait_confirm_status.ChoXacNhan,i.v_request_wait_confirm_status.ChiDinhDichVu).includes(null!==(o=i.requestService.VRequestWaitConfirmStatus)&&void 0!==o?o:0)?60:i.requestService.VRequestStatus==i.v_request_status.YeuCauDichVu&&i.isStaffLead?61:-1)}}function de(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"CarBrand")),e.R7$(4),e.JRh(t.CarBrand)}}function ve(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"ModelName")),e.R7$(4),e.JRh(t.ModelName)}}function _e(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"VehicleNumber")),e.R7$(4),e.JRh(t.VehicleNumber)}}function me(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"Vin")),e.R7$(4),e.JRh(t.Vin)}}function ge(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"YearOfManufacture")),e.R7$(4),e.JRh(t.YearOfManufacture)}}function he(n,s){if(1&n&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s(),e.EFF(7," / "),e.j41(8,"b",60),e.EFF(9),e.k0s()()()),2&n){let t,r,o;const i=e.XpG().$implicit,a=e.XpG();e.R7$(2),e.JRh(e.bMT(3,5,"PinStatus")),e.R7$(3),e.HbH(a.colorPin(null!==(t=i.RemainPowerPercent)&&void 0!==t?t:0)),e.R7$(),e.SpI("",null!==(r=i.RemainPowerPercent)&&void 0!==r?r:0,"%"),e.R7$(3),e.SpI("",null!==(o=i.RemainPowerPercent)&&void 0!==o?o:0," kWh")}}function Re(n,s){if(1&n&&(e.j41(0,"div",55)(1,"div",12)(2,"div",19)(3,"b",20),e.EFF(4),e.k0s()()(),e.nrm(5,"hr",56),e.j41(6,"div",57)(7,"div",58),e.EFF(8),e.k0s()(),e.j41(9,"div",16)(10,"table",17),e.DNE(11,de,7,4,"tr",59)(12,ve,7,4,"tr",59)(13,_e,7,4,"tr",59)(14,me,7,4,"tr",59)(15,ge,7,4,"tr",59)(16,he,10,7,"tr",59),e.k0s()()()),2&n){const t=s.$implicit;e.R7$(4),e.JRh(t.StaffFullName),e.R7$(4),e.JRh(t.StartLocation),e.R7$(3),e.Y8G("ngIf",t.CarBrand),e.R7$(),e.Y8G("ngIf",t.ModelName),e.R7$(),e.Y8G("ngIf",t.VehicleNumber),e.R7$(),e.Y8G("ngIf",t.Vin),e.R7$(),e.Y8G("ngIf",t.YearOfManufacture),e.R7$(),e.Y8G("ngIf",t.IsMobileStation)}}const pe=[{path:"",component:(()=>{var n;class s{constructor(r,o,i,a,l,d){var _;this.router=r,this.activatedRoute=o,this.modalController=i,this.animationController=a,this.toastController=l,this.loadingController=d,this.APP_ROUTE=R._,this.APP_FUNC_FormatDate=g.Rv,this.APP_FUNC_FormatMoney=g.xi,this.APP_FUNC_GetColor_VRequestStatus=g.rZ,this.APP_FUNC_GetColor_VRequestWaitConfirmStatus=g.In,this.v_request_status=C.Gz,this.v_request_wait_confirm_status=C.tq,this.v_service_type=C.kA,this.readfile_url=j.c.readfile_url,this.requestServiceCancelReasons=[],this.dataForm={},this.staffVehicleChargingWorkings=[];let v=null!==(_=o.snapshot.params.id)&&void 0!==_?_:"";v&&(this.RequestServiceId=parseFloat(v))}ngOnInit(){var r=this;this.IsOnInit=!0,(0,m.A)(function*(){(yield(0,A.kU)())&&r.refreshData(()=>{var o;(null===(o=r.requestService)||void 0===o?void 0:o.VRequestStatus)==C.Gz.YeuCauDichVu&&(0,y.z)({callback:i=>{var a,l;null!=i&&i.Succeeded&&(r.user=null!==(a=i.Data)&&void 0!==a?a:{},r.isStaffLead=!(null===(l=r.user)||void 0===l||null===(l=l.Roles)||void 0===l||!l.find(d=>d.Name==X.BF.Coordinator)))}})})})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(r){this.refreshData(()=>{r.target.complete()})}refreshData(r){var o=this;return(0,m.A)(function*(){(0,S.K5)({params:{RequestServiceId:o.RequestServiceId},callback:i=>{var a,l,d,_,v,p;o.response=i,null!=i&&i.Succeeded?(o.requestService=null!==(a=i.Data)&&void 0!==a?a:{},o.customerPosition={lat:null!==(l=null===(d=o.requestService)||void 0===d?void 0:d.RequestLat)&&void 0!==l?l:0,lng:null!==(_=null===(v=o.requestService)||void 0===v?void 0:v.RequestLong)&&void 0!==_?_:0},null!==(p=o.requestService)&&void 0!==p&&p.RequestProcessedId&&o.navigateByUrl(R._.REQUEST_PROCESSED_DETAIL.replace(":id",o.requestService.RequestProcessedId.toString()))):((0,h.cX)(o.toastController,{},i).then(F=>F.present()),o.navigateByUrl(R._.DEFAULT)),r&&r()}})})()}initMap(){var r=this;const o=function(){var a=(0,m.A)(function*(){let l,d,v=window.google.maps;const{Map:p}=yield v.importLibrary("maps"),{AdvancedMarkerElement:F}=yield v.importLibrary("marker");let P=new p(document.getElementById("map"),{zoom:12,center:r.customerPosition,disableDefaultUI:!0,mapId:"DEMO_MAP_ID"});r.customerPosition&&(l=new F({map:P,position:r.customerPosition,title:"V\u1ecb tr\xed kh\xe1ch h\xe0ng \u0111\u1eb7t l\u1ecbch"})),r.employePosition&&(d=new F({map:P,position:r.employePosition,title:"V\u1ecb tr\xed nh\xe2n vi\xean iSAC"})),r.customerPosition&&r.employePosition&&setTimeout(()=>{var b,q,D,k,Fe=v.DirectionsService(),M=v.DirectionsRenderer();M.setMap(P),Fe.route({origin:v.LatLng(null===(b=r.employePosition)||void 0===b?void 0:b.lat,null===(q=r.employePosition)||void 0===q?void 0:q.lng),destination:v.LatLng(null===(D=r.customerPosition)||void 0===D?void 0:D.lat,null===(k=r.customerPosition)||void 0===k?void 0:k.lng),travelMode:"DRIVING"},function(Ee,Pe){"OK"==Pe&&M.setDirections(Ee)})},1e3)});return function(){return a.apply(this,arguments)}}();window.initMap=o;let i=document.createElement("script");i.async=!0,i.src=`https://maps.google.com/maps/api/js?key=${j.c.apiKey}&libraries=places,marker,routes&callback=initMap&loading=async`,document.head.append(i)}refreshCurrentPosition(r){var o=this;return(0,m.A)(function*(){let i=()=>{(0,I.Xz)().then(a=>{o.employePosition=a,r&&r()})};$.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var a=(0,m.A)(function*(l){if(l.coords){var d={lat:l.coords.latitude,lng:l.coords.longitude};yield(0,I.fj)({params:d})}i()});return function(l){return a.apply(this,arguments)}}()).catch(()=>{i()})})()}navigateByUrl(r){this.router.navigateByUrl(r,{replaceUrl:!0})}getDistance(){var r,o,i,a;return(0,g.Rw)((0,g.GH)({lat:null===(r=this.requestService)||void 0===r?void 0:r.RequestLat,lng:null===(o=this.requestService)||void 0===o?void 0:o.RequestLong},{lat:null===(i=this.requestService)||void 0===i?void 0:i.DestLat,lng:null===(a=this.requestService)||void 0===a?void 0:a.DestLong}),10)}getDistance2CL(){return this.employePosition&&this.customerPosition?(0,g.Rw)((0,g.GH)(this.employePosition,this.customerPosition),10):0}getTime2CL(){return this.employePosition&&this.customerPosition?(0,g.Rw)(3*(0,g.GH)(this.employePosition,this.customerPosition),1):0}colorPin(r){return r<=20?"text-danger":r<=50?"text-warning":"text-success"}receiveService(r){var o=this;return(0,m.A)(function*(){var i;(0,h.Yy)(o.modalController,o.animationController,{selectedId:null===(i=o.requestService)||void 0===i?void 0:i.RequestServiceId,message:{TitleConfirm:"Nh\u1eadn d\u1ecbch v\u1ee5",Color:"primary"},fnConfirm:a=>{(0,S.c5)({loadingController:o.loadingController,params:{RequestServiceId:a},callback:l=>{null!=l&&l.Succeeded&&l.Data?o.navigateByUrl(R._.REQUEST_PROCESSED_DETAIL.replace(":id",l.Data)):(0,h.cX)(o.toastController,{},l).then(d=>d.present())}})}})})()}onModalDeclineServiceDidPresent(r){var o=this;return(0,m.A)(function*(){var i;(0,G.z)({loadingController:o.loadingController,params:{ServiceId:null===(i=o.requestService)||void 0===i?void 0:i.ServiceId,IsReasonForCustomer:!1,PageNumber:1,PageSize:100},callback:a=>{var l;null!=a&&a.Succeeded?o.requestServiceCancelReasons=null!==(l=a.Data)&&void 0!==l?l:[]:(0,h.cX)(o.toastController,{},a).then(d=>d.present())}})})()}changeRequestServiceCancelReason(r){var o=this;return(0,m.A)(function*(){o.dataForm.ReasonId=r.detail.value})()}changeReason(r){var o=this;return(0,m.A)(function*(){var i;o.dataForm.Reason=null===(i=r.detail.value)||void 0===i?void 0:i.trim()})()}get declineService_Disabled(){var r;return!(null!==(r=this.requestServiceCancelReasons.find(o=>o.RequestServiceCancelReasonId==this.dataForm.ReasonId))&&void 0!==r&&r.Reason||this.dataForm.Reason)}declineService(r,o){var i=this;return(0,m.A)(function*(){var a,l,d;(0,S.nj)({loadingController:i.loadingController,params:{RequestServiceId:null===(a=i.requestService)||void 0===a?void 0:a.RequestServiceId,Reason:null!==(l=null===(d=i.requestServiceCancelReasons.find(_=>_.RequestServiceCancelReasonId==i.dataForm.ReasonId))||void 0===d?void 0:d.Reason)&&void 0!==l?l:i.dataForm.Reason},callback:_=>{null!=_&&_.Succeeded?(null==o||o.dismiss(),i.navigateByUrl(R._.DEFAULT),(0,h.cX)(i.toastController,{color:"danger",message:"\u0110\xe3 t\u1eeb ch\u1ed1i nh\u1eadn d\u1ecbch v\u1ee5"}).then(v=>v.present())):(0,h.cX)(i.toastController,{},_).then(v=>v.present())}})})()}changeRequestServiceId(r,o){var i=this;return(0,m.A)(function*(){i.dataForm.RequestServiceId=null!=o?o:r.detail.value})()}changeStaffUserId(r){var o=this;return(0,m.A)(function*(){o.dataForm.StaffUserId=r.detail.value})()}onModalAssignServiceDidPresent(r){var o;(0,N.P6)({loadingController:this.loadingController,params:{ServiceId:null===(o=this.requestService)||void 0===o?void 0:o.ServiceId,PageNumber:1,PageSize:100},callback:i=>{var a;null!=i&&i.Succeeded?this.staffVehicleChargingWorkings=null!==(a=i.Data)&&void 0!==a?a:[]:(0,h.cX)(this.toastController,{},i).then(l=>l.present())}})}get assignService_Disabled(){return!this.dataForm.RequestServiceId||!this.dataForm.StaffUserId}assignService(r,o){var i=this;return(0,m.A)(function*(){i.assignService_Disabled||(0,S.wP)({params:{RequestServiceId:i.dataForm.RequestServiceId,StaffUserId:i.dataForm.StaffUserId},callback:a=>{null!=a&&a.Succeeded?(null==o||o.dismiss(),i.navigateByUrl(R._.DEFAULT)):(0,h.cX)(i.toastController,{},a).then(l=>l.present())}})})()}}return(n=s).\u0275fac=function(r){return new(r||n)(e.rXU(f.Ix),e.rXU(f.nX),e.rXU(c.W3),e.rXU(c.Hx),e.rXU(c.K_),e.rXU(c.Xi))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-request-service-detail"]],decls:10,vars:5,consts:[["templateStaff",""],["modalDeclineService",""],["modalAssignService",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"bg"],[1,"container","mt-5"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-6","mb-4"],[1,"card-service","h-100","bg-white","rounded","p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fs-18","fw-700"],[1,"fs-14",3,"color"],[1,"mt-2","mb-2"],[1,"d-flex","align-items-start"],[1,"table","table-borderless","m-0"],[1,"card-vehicle","h-100","bg-white","rounded","p-3"],[1,"text-ellipsis"],[1,"mr-1"],[1,"ion-modal-auto",3,"didPresent"],[3,"didPresent"],[1,"ion-padding-vertical"],[1,"card-day","rounded","bg-white","p-3"],[1,"m-0"],[1,"border-dashed","mt-2","mb-3"],[1,"text-medium"],[1,"mb-2"],[1,"mb-3"],[1,"card-day","rounded","bg-white","mt-2"],[3,"src"],["slot","end"],[3,"click"],["name","close-outline",1,"fs-24"],[1,"ion-padding","mb-4"],[1,"mt-3","ion-item-input"],["lines","none"],["placeholder","Ch\u1ecdn l\xed do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5","interface","action-sheet",3,"ionChange","value","cancelText","okText"],[3,"value"],[1,"d-flex","p-2"],["fill","outline","color","medium","expand","block","shape","round",1,"flex-grow-1","m-1",3,"click"],["color","danger","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click","disabled"],["maxlength","250","placeholder","Nh\u1eadp l\xed do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5!",3,"ionChange","autoGrow","value"],[1,"text-center"],[1,"ion-padding-horizontal"],[3,"ionChange","value"],[1,"vehicle-charging","mb-3"],["color","primary","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click","disabled"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container","d-flex","align-items-center","justify-content-between"],["color","danger","shape","round","expand","block",1,"m-1","flex-grow-1",3,"click"],["color","primary","shape","round","expand","block",1,"m-1","flex-grow-1",3,"click"],[1,"card-vehicle","h-100"],[1,"mt-2","mb-1"],[1,"mb-3","fs-12"],[1,"text-wrap"],[4,"ngIf"],[1,"text-muted"]],template:function(r,o){1&r&&(e.j41(0,"ion-header",3)(1,"ion-toolbar")(2,"ion-buttons",4),e.nrm(3,"ion-back-button",5),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.DNE(7,ue,62,21)(8,Re,17,8,"ng-template",null,0,e.C5r)),2&r&&(e.R7$(3),e.Y8G("defaultHref",o.APP_ROUTE.DEFAULT),e.R7$(2),e.JRh(e.bMT(6,3,"ServiceDetail")),e.R7$(2),e.vxM(7,o.requestService?7:-1))},dependencies:[E.bT,E.T3,c.Jm,c.QW,c.W9,c.M0,c.eU,c.iq,c.KW,c.uz,c.he,c.KO,c.f0,c.To,c.Ki,c.Nm,c.Ip,c.IO,c.nc,c.BC,c.ai,c.Sb,c.Je,c.Gw,c.el,V.D9],styles:[".bg[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;width:100%;height:150px;background-color:var(--ion-color-primary);background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:center center;background-size:auto 200%}.card-service.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-service[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-vehicle.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-vehicle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-package.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}"]}),s})()}];let fe=(()=>{var n;class s{}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[f.iI.forChild(pe),f.iI]}),s})();var Se=u(3664);let Ce=(()=>{var n;class s{}return(n=s).\u0275fac=function(r){return new(r||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[E.MD,T.YN,c.bv,fe,Se.x]}),s})()}}]);