"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6488],{4393:(j,U,o)=>{o.d(U,{FC:()=>R,SD:()=>M,T9:()=>v});var b=o(467),e=o(369);const i=new e.w({name:"_localDB",driverOrder:[e.C.IndexedDB,e.C.LocalStorage]}),R=function(){var r=(0,b.A)(function*(t){var l;yield i.create(),(t=null!==(l=t)&&void 0!==l?l:{}).params=t.params||{};try{var c=(yield i.get("setting"))||{};return"function"==typeof t.callback&&t.callback(c),c}catch(s){"function"==typeof t.callback&&t.callback(),console.error(s)}return{}});return function(l){return r.apply(this,arguments)}}(),v=function(){var r=(0,b.A)(function*(t){var l;yield i.create();var d="setting";(t=null!==(l=t)&&void 0!==l?l:{}).params=t.params||{};try{var c=(yield i.get(d))||{};Object.assign(c,t.params),yield i.set(d,c),"function"==typeof t.callback&&t.callback(c)}catch(s){"function"==typeof t.callback&&t.callback(),console.error(s)}});return function(l){return r.apply(this,arguments)}}(),M=function(){var r=(0,b.A)(function*(t){var l;yield i.create(),(t=null!==(l=t)&&void 0!==l?l:{}).params=t.params||{};try{yield i.set("setting",{}),"function"==typeof t.callback&&t.callback()}catch(c){"function"==typeof t.callback&&t.callback(),console.error(c)}});return function(l){return r.apply(this,arguments)}}()},9946:(j,U,o)=>{o.d(U,{ks:()=>R,sh:()=>v,z:()=>i});var b=o(467),e=o(5972);const i=function(){var M=(0,b.A)(function*(r){r.params=r.params||{},(0,e.hm)({url:"api/User/get-user",params:{},success:t=>{"function"==typeof r.callback&&r.callback(t.data||null)},error:t=>{var l;"function"==typeof r.callback&&r.callback(null==t||null===(l=t.response)||void 0===l?void 0:l.data),console.error(t)},loading:r.loading,loadingController:r.loadingController})});return function(t){return M.apply(this,arguments)}}(),R=function(){var M=(0,b.A)(function*(r){var t,l,d,c,s,m;r.params=r.params||{},(0,e.IH)({url:"api/User/update-user",params:{FullName:null!==(t=r.params.FullName)&&void 0!==t?t:null,PersonEmail:null!==(l=r.params.Email)&&void 0!==l?l:null,Phone:null!==(d=r.params.Phone)&&void 0!==d?d:null,Address:null!==(c=r.params.Address)&&void 0!==c?c:null,Gender:null!==(s=r.params.Gender)&&void 0!==s?s:null,Birthday:null!==(m=r.params.Birthday)&&void 0!==m?m:null},success:h=>{"function"==typeof r.callback&&r.callback(h.data||null)},error:h=>{var I;"function"==typeof r.callback&&r.callback(null==h||null===(I=h.response)||void 0===I?void 0:I.data),console.error(h)},loading:r.loading,loadingController:r.loadingController})});return function(t){return M.apply(this,arguments)}}(),v=function(){var M=(0,b.A)(function*(r){var t,l;r.params=r.params||{},(0,e.IH)({url:"api/User/update-avatar",params:{UserId:null!==(t=r.params.UserId)&&void 0!==t?t:null,Avatar:null!==(l=r.params.Avatar)&&void 0!==l?l:null},success:d=>{"function"==typeof r.callback&&r.callback(d.data||null)},error:d=>{var c;"function"==typeof r.callback&&r.callback(null==d||null===(c=d.response)||void 0===c?void 0:c.data),console.error(d)},loading:r.loading,loadingController:r.loadingController})});return function(t){return M.apply(this,arguments)}}()},6171:(j,U,o)=>{o.d(U,{A:()=>t});var b=o(6757),e=o(4438),i=o(9465),R=o(177),v=o(9362),M=o(4842);function r(l,d){if(1&l){const c=e.RV6();e.qex(0),e.j41(1,"div")(2,"image-cropper",6),e.bIt("imageCropped",function(m){e.eBV(c);const h=e.XpG();return e.Njj(h.imageCropped(m))})("imageLoaded",function(m){e.eBV(c);const h=e.XpG();return e.Njj(h.imageLoaded(m))})("cropperReady",function(){e.eBV(c);const m=e.XpG();return e.Njj(m.cropperReady())})("loadImageFailed",function(){e.eBV(c);const m=e.XpG();return e.Njj(m.loadImageFailed())}),e.k0s()(),e.bVm()}if(2&l){const c=e.XpG();e.R7$(2),e.Y8G("imageFile",c.file)("maintainAspectRatio",!0)("aspectRatio",1)("format",c.croppedImageFormat)}}let t=(()=>{var l;class d{constructor(s){this.modalController=s,this.croppedImageFormat="png"}ngOnInit(){}close(){this.modalController.dismiss()}submit(){this.croppedImage?(0,b.hy)(this.croppedImage,this.croppedImageFormat,s=>{s?this.modalController.dismiss(s,"submit"):this.close()}):this.close()}imageCropped(s){var m;this.croppedImage=null!==(m=s.objectUrl)&&void 0!==m?m:void 0}imageLoaded(s){}cropperReady(){}loadImageFailed(){}}return(l=d).\u0275fac=function(s){return new(s||l)(e.rXU(i.W3))},l.\u0275cmp=e.VBU({type:l,selectors:[["app-modal-photo-cropper"]],inputs:{file:"file"},decls:15,vars:7,consts:[[1,"h-100","d-flex","align-items-center","justify-content-center"],[4,"ngIf"],[1,"container","px-2","py-3","d-flex","align-items-stretch","justify-content-around"],[1,"flex-grow-1","mx-1"],["color","medium","shape","round","fill","outline","expand","block",3,"click"],["color","primary","shape","round","expand","block",3,"click"],[3,"imageCropped","imageLoaded","cropperReady","loadImageFailed","imageFile","maintainAspectRatio","aspectRatio","format"]],template:function(s,m){1&s&&(e.j41(0,"ion-content")(1,"div",0),e.DNE(2,r,3,4,"ng-container",1),e.k0s()(),e.j41(3,"ion-footer")(4,"div",2)(5,"div",3)(6,"ion-button",4),e.bIt("click",function(){return m.close()}),e.j41(7,"ion-label"),e.EFF(8),e.nI1(9,"translate"),e.k0s()()(),e.j41(10,"div",3)(11,"ion-button",5),e.bIt("click",function(){return m.submit()}),e.j41(12,"ion-label"),e.EFF(13),e.nI1(14,"translate"),e.k0s()()()()()),2&s&&(e.R7$(2),e.Y8G("ngIf",m.file),e.R7$(6),e.JRh(e.bMT(9,3,"Cancel")),e.R7$(5),e.JRh(e.bMT(14,5,"Complete")))},dependencies:[R.bT,i.Jm,i.W9,i.M0,i.he,v._D,M.D9]}),d})()},6488:(j,U,o)=>{o.r(U),o.d(U,{UserPageModule:()=>N});var b=o(177),e=o(9417),i=o(9465),R=o(7625),v=o(467),M=o(23),r=o(1038),t=o(9946),l=o(6539),d=o(8517),c=o(8833),s=o(5312),m=o(2021),h=o(4393),I=o(6171),B=o(6757),n=o(4438),S=o(345),A=o(4842);function D(p,T){if(1&p){const y=n.RV6();n.j41(0,"div",30)(1,"div",31)(2,"h4",32),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"p",33),n.EFF(6),n.nI1(7,"translate"),n.k0s()(),n.j41(8,"div",34)(9,"div",35)(10,"ion-button",36),n.bIt("click",function(){n.eBV(y),n.XpG();const a=n.sdS(95);return n.Njj(null==a?null:a.dismiss())}),n.EFF(11),n.nI1(12,"translate"),n.k0s()(),n.j41(13,"div",37)(14,"ion-button",38),n.bIt("click",function(a){n.eBV(y);const g=n.XpG(),_=n.sdS(95);return null==_||_.dismiss(),n.Njj(g.signOut(a))}),n.EFF(15),n.nI1(16,"translate"),n.k0s()()()()}2&p&&(n.R7$(3),n.JRh(n.bMT(4,4,"SignOut")),n.R7$(3),n.JRh(n.bMT(7,6,"SignOut_Confirm")),n.R7$(5),n.JRh(n.bMT(12,8,"Cancel")),n.R7$(4),n.JRh(n.bMT(16,10,"Confirm")))}const $=[{path:"",component:(()=>{var p;class T{constructor(u,a,g,_,f,P){this.router=u,this.titleService=a,this.translateService=g,this.loadingController=_,this.toastController=f,this.modalController=P,this.isAppTest=s.c.apptest,this.APP_ROUTE=c._,this.readfile_url=s.c.readfile_url,this.params={},this.APP_FUNC_FormatMobileNumber=d.IV,this.APP_FUNC_FormatTel=d.YH}ngOnInit(){var u=this;(0,v.A)(function*(){(yield(0,l.kU)())&&u.refreshData()})()}onIonRefresher(u){this.refreshData(()=>{u.target.complete()})}refreshData(u){var a=this;return(0,v.A)(function*(){(0,t.z)({loadingController:a.loadingController,callback:g=>{var _,f,P;null!=g&&g.Succeeded?(a.user=null!==(_=g.Data)&&void 0!==_?_:{},null!==(f=a.user)&&void 0!==f&&f.FullName?a.titleService.setTitle(null===(P=a.user)||void 0===P?void 0:P.FullName):a.translateService.stream("User").subscribe(C=>{a.titleService.setTitle(C)})):(0,m.cX)(a.toastController,{},g).then(C=>C.present()),u&&u()}})})()}signOut(u){return(0,v.A)(function*(){yield(0,h.SD)(),(0,M.wn)({callback:()=>{window.location.replace(c._.AUTH)}})})()}changeAvatar(u){var a=this;return(0,v.A)(function*(){(0,B.$3)({modalController:a.modalController,toastController:a.toastController},function(){var g=(0,v.A)(function*(_){if(_.length){let f=yield a.modalController.create({component:I.A,componentProps:{file:_[0]},backdropDismiss:!0,keyboardClose:!0});f.onDidDismiss().then(function(){var P=(0,v.A)(function*(C){"submit"==C.role&&C.data&&(0,r.v)({loadingController:a.loadingController,params:{file:C.data,subFolder:"avatar",fileType:"image"},callback:k=>{var F;0==(null==k?void 0:k.ReturnCode)?(0,t.sh)({loadingController:a.loadingController,params:{UserId:null===(F=a.user)||void 0===F?void 0:F.UserId,Avatar:`${k.path}/${k.file.name}`},callback:O=>{null!=O&&O.Succeeded?a.refreshData():(0,m.cX)(a.toastController,{},O).then(x=>x.present())}}):(0,m.cX)(a.toastController,{},k).then(O=>O.present())}})});return function(C){return P.apply(this,arguments)}}()),f.present()}});return function(_){return g.apply(this,arguments)}}())})()}changeAvatar2(u){var a=this;return(0,v.A)(function*(){(0,d.oG)({accept:"image/*"},function(){var g=(0,v.A)(function*(_){(0,r.v)({loadingController:a.loadingController,params:{file:_[0],subFolder:"avatar",fileType:"image"},callback:f=>{var P;0==(null==f?void 0:f.ReturnCode)&&(0,t.sh)({loadingController:a.loadingController,params:{UserId:null===(P=a.user)||void 0===P?void 0:P.UserId,Avatar:`${f.path}/${f.file.name}`},callback:C=>{null!=C&&C.Succeeded?a.refreshData():(0,m.cX)(a.toastController,{},C).then(E=>E.present())}})}})});return function(_){return g.apply(this,arguments)}}())})()}navigateByUrl(u){var a=this;return(0,v.A)(function*(){a.router.navigateByUrl(u)})()}}return(p=T).\u0275fac=function(u){return new(u||p)(n.rXU(R.Ix),n.rXU(S.hE),n.rXU(A.c$),n.rXU(i.Xi),n.rXU(i.K_),n.rXU(i.W3))},p.\u0275cmp=n.VBU({type:p,selectors:[["app-user"]],decls:97,vars:65,consts:[["modalSignOut",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"card-info"],[1,"bg"],[1,"avatar"],[3,"click"],[3,"src"],[1,"change-avatar"],["color","light",3,"click"],["src","../../../assets/icon/ion-icon/camera-shape.svg"],[1,"text-center","text-primary","mt-3","mb-0"],[1,"container","py-3"],["mode","ios","lines","none"],["button","","detail","true","color","light","detail-icon","chevron-forward-outline",3,"click"],["slot","start","src","../../../assets/icon/ion-icon/person-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/setting-circle.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/ion-icon/feedback-circle.svg",1,"fs-24"],[1,"container","card-company","bg-white","rounded"],[1,"table","table-borderless","m-0"],[1,"text-muted"],[3,"innerHTML"],[1,"text-dark",3,"href","innerHTML"],[1,"mt-3"],["mode","ios","color","light","expand","block","id","click-trigger-modal-signout",1,"btn-sign-out"],["slot","start","color","primary","src","../../../assets/icon/ion-icon/sign-out.svg",1,"fs-24"],["trigger","click-trigger-modal-signout",1,"ion-modal-small"],[1,"p-4"],[1,"text-center"],[1,"mb-2"],[1,"mb-4","fs-3"],[1,"row"],[1,"col-6","pr-1"],["fill","outline","color","medium","expand","block","shape","round",3,"click"],[1,"col-6","pl-1"],["color","primary","expand","block","shape","round",3,"click"]],template:function(u,a){if(1&u){const g=n.RV6();n.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),n.nrm(3,"ion-back-button",3),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()(),n.j41(7,"ion-content",4)(8,"ion-refresher",5),n.bIt("ionRefresh",function(f){return n.eBV(g),n.Njj(a.onIonRefresher(f))}),n.nrm(9,"ion-refresher-content"),n.k0s(),n.j41(10,"div",6),n.nrm(11,"div",7),n.j41(12,"div",8)(13,"ion-avatar",9),n.bIt("click",function(f){return n.eBV(g),n.Njj(a.changeAvatar(f))}),n.nrm(14,"img",10),n.k0s(),n.j41(15,"div",11)(16,"ion-button",12),n.bIt("click",function(f){return n.eBV(g),n.Njj(a.changeAvatar(f))}),n.nrm(17,"ion-icon",13),n.k0s()()(),n.j41(18,"h5",14)(19,"b"),n.EFF(20),n.nI1(21,"translate"),n.k0s()()(),n.j41(22,"div",15)(23,"ion-list",16)(24,"ion-item",17),n.bIt("click",function(){return n.eBV(g),n.Njj(a.navigateByUrl(a.APP_ROUTE.USER_INFO))}),n.nrm(25,"ion-icon",18),n.j41(26,"ion-label"),n.EFF(27),n.nI1(28,"translate"),n.k0s()()(),n.j41(29,"ion-list",16)(30,"ion-item",17),n.bIt("click",function(){return n.eBV(g),n.Njj(a.navigateByUrl(a.APP_ROUTE.SETTING))}),n.nrm(31,"ion-icon",19),n.j41(32,"ion-label"),n.EFF(33),n.nI1(34,"translate"),n.k0s()(),n.j41(35,"ion-item",17),n.bIt("click",function(){return n.eBV(g),n.Njj(a.navigateByUrl(a.APP_ROUTE.FEEDBACK))}),n.nrm(36,"ion-icon",20),n.j41(37,"ion-label"),n.EFF(38),n.nI1(39,"translate"),n.k0s()()(),n.j41(40,"div",21)(41,"table",22)(42,"tr")(43,"td",23),n.EFF(44),n.nI1(45,"translate"),n.k0s(),n.j41(46,"td"),n.nrm(47,"b",24),n.nI1(48,"translate"),n.k0s()(),n.j41(49,"tr")(50,"td",23),n.EFF(51),n.nI1(52,"translate"),n.k0s(),n.j41(53,"td"),n.nrm(54,"b",24),n.nI1(55,"translate"),n.k0s()(),n.j41(56,"tr")(57,"td",23),n.EFF(58),n.nI1(59,"translate"),n.k0s(),n.j41(60,"td"),n.nrm(61,"b",24),n.nI1(62,"translate"),n.k0s()(),n.j41(63,"tr")(64,"td",23),n.EFF(65),n.nI1(66,"translate"),n.k0s(),n.j41(67,"td"),n.nrm(68,"b",24),n.nI1(69,"translate"),n.k0s()(),n.j41(70,"tr")(71,"td",23),n.EFF(72),n.nI1(73,"translate"),n.k0s(),n.j41(74,"td")(75,"b"),n.nrm(76,"a",25),n.nI1(77,"translate"),n.nI1(78,"translate"),n.k0s()()(),n.j41(79,"tr")(80,"td",23),n.EFF(81),n.nI1(82,"translate"),n.k0s(),n.j41(83,"td")(84,"b"),n.nrm(85,"a",25),n.nI1(86,"translate"),n.nI1(87,"translate"),n.k0s()()()()(),n.j41(88,"div",26)(89,"ion-button",27),n.nrm(90,"ion-icon",28),n.j41(91,"ion-label",1),n.EFF(92),n.nI1(93,"translate"),n.k0s()()()(),n.j41(94,"ion-modal",29,0),n.DNE(96,D,17,12,"ng-template"),n.k0s()()}if(2&u){let g;n.R7$(3),n.Y8G("defaultHref",a.APP_ROUTE.TABS_DEFAULT),n.R7$(2),n.JRh(n.bMT(6,25,"UserInfo")),n.R7$(2),n.Y8G("fullscreen",!0),n.R7$(7),n.Y8G("src",null!=a.user&&a.user.Avatar?a.readfile_url+(null==a.user?null:a.user.Avatar):"assets/icon/ion-img/no-avatar.svg",n.B4B),n.R7$(6),n.JRh(null!==(g=null==a.user?null:a.user.FullName)&&void 0!==g?g:n.bMT(21,27,"NotUpdate")),n.R7$(7),n.JRh(n.bMT(28,29,"UserInfo")),n.R7$(6),n.JRh(n.bMT(34,31,"Setting")),n.R7$(5),n.JRh(n.bMT(39,33,"SendFeedback")),n.R7$(6),n.JRh(n.bMT(45,35,"Company")),n.R7$(3),n.Y8G("innerHTML",n.bMT(48,37,"CompanyName"),n.npT),n.R7$(4),n.JRh(n.bMT(52,39,"Tax")),n.R7$(3),n.Y8G("innerHTML",n.bMT(55,41,"CompanyTax"),n.npT),n.R7$(4),n.JRh(n.bMT(59,43,"LicenseDate")),n.R7$(3),n.Y8G("innerHTML",n.bMT(62,45,"CompanyTaxLicenseDate"),n.npT),n.R7$(4),n.JRh(n.bMT(66,47,"Address")),n.R7$(3),n.Y8G("innerHTML",n.bMT(69,49,"CompanyAddress"),n.npT),n.R7$(4),n.JRh(n.bMT(73,51,"Email")),n.R7$(4),n.Mz_("href","mailto:",n.bMT(77,53,"CompanyEmail"),"",n.B4B),n.Y8G("innerHTML",n.bMT(78,55,"CompanyEmail"),n.npT),n.R7$(5),n.JRh(n.bMT(82,57,"Hotline")),n.R7$(4),n.Mz_("href","tel:",a.APP_FUNC_FormatTel(n.bMT(86,59,"CompanyMobile")),"",n.B4B),n.Y8G("innerHTML",n.bMT(87,61,"CompanyMobile"),n.npT),n.R7$(7),n.JRh(n.bMT(93,63,"SignOut"))}},dependencies:[i.mC,i.Jm,i.QW,i.W9,i.eU,i.iq,i.uz,i.he,i.nf,i.To,i.Ki,i.BC,i.ai,i.Sb,i.el,A.D9],styles:[".card-info[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{padding:3rem 1rem;background-color:var(--ion-color-primary);background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:center center;background-size:auto 200%}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:relative;z-index:1;width:7rem;margin:-3rem auto auto}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:7rem;height:7rem;border:.125rem solid var(--ion-color-light);background-color:var(--ion-color-light)}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]{position:absolute;z-index:2;bottom:0;right:0}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: 50%}.card-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   .change-avatar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint)}.card-info[_ngcontent-%COMP%]   .icon-w24[_ngcontent-%COMP%]{display:inline-block;width:24px}.card-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}ion-thumbnail[_ngcontent-%COMP%]{--size: 6rem;--border-radius: 50%;margin:auto;cursor:pointer}ion-list[_ngcontent-%COMP%]{padding:.5rem 0;margin:.5rem 0 1rem;border-radius:1rem;box-shadow:0 .125rem .5rem #00000026;background:var(--ion-color-light)!important}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 3rem}.btn-sign-out[_ngcontent-%COMP%]{--box-shadow: 0 .125rem .5rem rgba(0, 0, 0, .15)}.card-company[_ngcontent-%COMP%]{padding:1rem}.card-company.rounded[_ngcontent-%COMP%]{border-radius:.5rem!important}.card-company[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important;margin:.5rem 0}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-company[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}"]}),T})()}];let G=(()=>{var p;class T{}return(p=T).\u0275fac=function(u){return new(u||p)},p.\u0275mod=n.$C({type:p}),p.\u0275inj=n.G2t({imports:[R.iI.forChild($),R.iI]}),T})();var L=o(3890);let N=(()=>{var p;class T{}return(p=T).\u0275fac=function(u){return new(u||p)},p.\u0275mod=n.$C({type:p}),p.\u0275inj=n.G2t({imports:[b.MD,e.YN,i.bv,G,L.x]}),T})()}}]);