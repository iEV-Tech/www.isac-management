"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1128],{5454:(N,I,c)=>{c.d(I,{K5:()=>F,X1:()=>o,c5:()=>q,cj:()=>M,fy:()=>T,ke:()=>A,nj:()=>j,wP:()=>E});var m=c(467),f=c(5972);const o=function(){var g=(0,m.A)(function*(e){var t,i,a,s,p,h,P,C,D,$,b;e.params=e.params||{},(0,f.Ll)({url:"api/RequestService/create",params:{ServiceId:null!==(t=e.params.ServiceId)&&void 0!==t?t:null,ChargePackageId:null!==(i=e.params.ChargePackageId)&&void 0!==i?i:null,RequestAddress:null!==(a=e.params.RequestAddress)&&void 0!==a?a:null,RequestLat:null!==(s=e.params.RequestLat)&&void 0!==s?s:null,RequestLong:null!==(p=e.params.RequestLong)&&void 0!==p?p:null,DestAddress:null!==(h=e.params.DestAddress)&&void 0!==h?h:null,DestLat:null!==(P=e.params.DestLat)&&void 0!==P?P:null,DestLong:null!==(C=e.params.DestLong)&&void 0!==C?C:null,ExecutionDateAsString:null!==(D=e.params.ExecutionDate)&&void 0!==D?D:null,ExecutionTimeAsString:null!==($=e.params.ExecutionTime)&&void 0!==$?$:null,Notes:null!==(b=e.params.Notes)&&void 0!==b?b:null},success:_=>{"function"==typeof e.callback&&e.callback(_.data||null)},error:_=>{var y;"function"==typeof e.callback&&e.callback(null==_||null===(y=_.response)||void 0===y?void 0:y.data),console.error(_)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),T=function(){var g=(0,m.A)(function*(e){var t,i,a,s;e.params=e.params||{},(0,f.hm)({url:"api/RequestService/get-myhistory",params:{VRequestStatus:null!==(t=e.params.VRequestStatus)&&void 0!==t?t:null,VRequestStatusMulti:null!==(i=e.params.VRequestStatusMulti)&&void 0!==i?i:null,PageNumber:null!==(a=e.params.PageNumber)&&void 0!==a?a:1,PageSize:null!==(s=e.params.PageSize)&&void 0!==s?s:10},success:p=>{"function"==typeof e.callback&&e.callback(p.data||null)},error:p=>{var h;"function"==typeof e.callback&&e.callback(null==p||null===(h=p.response)||void 0===h?void 0:h.data),console.error(p)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),F=function(){var g=(0,m.A)(function*(e){var t;e.params=e.params||{},(0,f.hm)({url:`api/RequestService/get-detail/${e.params.RequestServiceId}`,params:{RequestServiceId:null!==(t=e.params.RequestServiceId)&&void 0!==t?t:null},success:i=>{"function"==typeof e.callback&&e.callback(i.data||null)},error:i=>{var a;"function"==typeof e.callback&&e.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),M=function(){var g=(0,m.A)(function*(e){var t,i;e.params=e.params||{},(0,f.hm)({url:"api/RequestService/get-requesting",params:{PageNumber:null!==(t=e.params.PageNumber)&&void 0!==t?t:1,PageSize:null!==(i=e.params.PageSize)&&void 0!==i?i:10},success:a=>{"function"==typeof e.callback&&e.callback(a.data||null)},error:a=>{var s;"function"==typeof e.callback&&e.callback(null==a||null===(s=a.response)||void 0===s?void 0:s.data),console.error(a)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),A=function(){var g=(0,m.A)(function*(e){var t,i;e.params=e.params||{},(0,f.hm)({url:"api/RequestService/get-waitconfirm",params:{PageNumber:null!==(t=e.params.PageNumber)&&void 0!==t?t:1,PageSize:null!==(i=e.params.PageSize)&&void 0!==i?i:10},success:a=>{"function"==typeof e.callback&&e.callback(a.data||null)},error:a=>{var s;"function"==typeof e.callback&&e.callback(null==a||null===(s=a.response)||void 0===s?void 0:s.data),console.error(a)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),q=function(){var g=(0,m.A)(function*(e){var t;e.params=e.params||{},(0,f.Ll)({url:"api/RequestService/wait-confirm",params:{RequestServiceId:null!==(t=e.params.RequestServiceId)&&void 0!==t?t:null},success:i=>{"function"==typeof e.callback&&e.callback(i.data||null)},error:i=>{var a;"function"==typeof e.callback&&e.callback(null==i||null===(a=i.response)||void 0===a?void 0:a.data),console.error(i)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),E=function(){var g=(0,m.A)(function*(e){var t,i;e.params=e.params||{},(0,f.Ll)({url:"api/RequestService/assign",params:{RequestServiceId:null!==(t=e.params.RequestServiceId)&&void 0!==t?t:null,StaffUserId:null!==(i=e.params.StaffUserId)&&void 0!==i?i:null},success:a=>{"function"==typeof e.callback&&e.callback(a.data||null)},error:a=>{var s;"function"==typeof e.callback&&e.callback(null==a||null===(s=a.response)||void 0===s?void 0:s.data),console.error(a)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}(),j=function(){var g=(0,m.A)(function*(e){var t,i;e.params=e.params||{},(0,f.Ll)({url:"api/RequestService/decline",params:{RequestServiceId:null!==(t=e.params.RequestServiceId)&&void 0!==t?t:null,Reason:null!==(i=e.params.Reason)&&void 0!==i?i:null},success:a=>{"function"==typeof e.callback&&e.callback(a.data||null)},error:a=>{var s;"function"==typeof e.callback&&e.callback(null==a||null===(s=a.response)||void 0===s?void 0:s.data),console.error(a)},loading:e.loading,loadingController:e.loadingController})});return function(t){return g.apply(this,arguments)}}()},1128:(N,I,c)=>{c.r(I),c.d(I,{RequestServicePageModule:()=>y});var m=c(177),f=c(9417),o=c(9465),k=c(7625),T=c(467),F=c(5312),M=c(5454),A=c(6539),q=c(8517),E=c(2021),j=c(3588),g=c(8833),e=c(4438),t=c(3656),i=c(4842);const a=r=>({$implicit:r});function s(r,v){if(1&r&&(e.qex(0),e.j41(1,"div",12),e.eu8(2,13),e.k0s(),e.bVm()),2&r){const d=v.$implicit;e.XpG(2);const n=e.sdS(32);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,a,d))}}function p(r,v){if(1&r&&(e.j41(0,"div",8)(1,"div",10),e.DNE(2,s,3,4,"ng-container",11),e.k0s()()),2&r){const d=e.XpG();e.R7$(2),e.Y8G("ngForOf",d.requestServices)}}function h(r,v){1&r&&(e.j41(0,"div",14),e.nrm(1,"img",15),e.j41(2,"div",16),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&r&&(e.R7$(3),e.JRh(e.bMT(4,1,"DataNotFound")))}function P(r,v){if(1&r){const d=e.RV6();e.j41(0,"ion-infinite-scroll",17),e.bIt("ionInfinite",function(l){e.eBV(d);const u=e.XpG();return e.Njj(u.onIonInfinite(l))}),e.nrm(1,"ion-infinite-scroll-content"),e.k0s()}}function C(r,v){if(1&r){const d=e.RV6();e.j41(0,"div",18),e.bIt("click",function(){let l;const u=e.eBV(d).$implicit,R=e.XpG();return e.Njj(R.navigateByUrl(R.APP_ROUTE.REQUEST_SERVICE_DETAIL.replace(":id",null!==(l=null==u.RequestServiceId?null:u.RequestServiceId.toString())&&void 0!==l?l:"")))}),e.j41(1,"div",19)(2,"b"),e.EFF(3),e.k0s(),e.j41(4,"ion-chip")(5,"ion-label"),e.EFF(6),e.k0s()()(),e.j41(7,"div",20)(8,"small",21),e.EFF(9),e.k0s(),e.j41(10,"ion-text",22)(11,"small")(12,"b"),e.EFF(13),e.k0s()()()()()}if(2&r){let d;const n=v.$implicit,l=e.XpG();e.R7$(3),e.JRh(n.ServiceName),e.R7$(3),e.SpI("",l.APP_FUNC_FormatMoney(null!==(d=n.PayValue)&&void 0!==d?d:0),"\u0111"),e.R7$(3),e.JRh(l.APP_FUNC_FormatDate(n.RequestDate)),e.R7$(),e.Y8G("color",l.APP_FUNC_GetColor_VRequestStatus(n.VRequestStatus)),e.R7$(3),e.JRh(n.VRequestStatusName)}}const $=[{path:"",component:(()=>{var r;class v{constructor(n,l,u,R,S,V){this.router=n,this.platform=l,this.modalController=u,this.animationController=R,this.toastController=S,this.loadingController=V,this.APP_ROUTE=g._,this.APP_FUNC_FormatMoney=q.xi,this.APP_FUNC_FormatDate=q.Rv,this.APP_FUNC_GetColor_VRequestStatus=q.rZ,this.v_request_status=j.Gz,this.readfile_url=F.c.readfile_url,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.requestServices=[]}ngOnInit(){this.IsOnInit=!0,(0,A.kU)().then(n=>{n&&this.refreshData()})}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(n){this.filter={},this.refreshData(()=>{n.target.complete()})}onIonInfinite(n){this.loadMore(()=>{n.target.complete()})}onIonSegmentChange(n){this.filter.VRequestStatusMulti=n.detail.value,this.filterChange()}pushData(n){1==this.paging.page&&(this.requestServices.length=0),this.requestServices=this.requestServices.concat(n)}refreshData(n){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging(n)}loadMore(n){this.paging.page+=1,this.loadData_Paging(n)}searchChange(n){this.filter.search=n.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}sortChange(n,l){this.paging.sortfield=n||null,this.paging.sorttype=l||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}loadData_Paging(n){var l=this;return(0,T.A)(function*(){l.paging.loading=!0,(0,M.fy)({loadingController:l.loadingController,params:{VRequestStatusMulti:l.filter.VRequestStatusMulti,PageNumber:l.paging.page,PageSize:l.paging.limit},callback:u=>{var R;l.response=u,null!=u&&u.Succeeded?l.pushData(null!==(R=u.Data)&&void 0!==R?R:[]):(0,E.cX)(l.toastController,{},u).then(S=>S.present()),l.paging.loading=!1,l.paging.active=!(null==u||!u.HasNextPage),n&&n()}})})()}navigateByUrl(n){this.router.navigateByUrl(n)}}return(r=v).\u0275fac=function(n){return new(n||r)(e.rXU(k.Ix),e.rXU(t.OD),e.rXU(o.W3),e.rXU(o.Hx),e.rXU(o.K_),e.rXU(o.Xi))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-request-service"]],decls:33,vars:28,consts:[["templateRequestService",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"container","px-0"],["mode","md",3,"ionChange","value"],["value",""],[3,"value"],[1,"container","pt-3","pb-4"],[3,"ionInfinite",4,"ngIf"],[1,"row"],[4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container","py-5","text-center"],["src","../../../assets/image/default/no-info.svg"],[1,"text-muted","mt-4"],[3,"ionInfinite"],[1,"card-order","cursor-pointer",3,"click"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-end","justify-content-between","mt-2"],[1,"text-muted"],[3,"color"]],template:function(n,l){if(1&n){const u=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-refresher",3),e.bIt("ionRefresh",function(S){return e.eBV(u),e.Njj(l.onIonRefresher(S))}),e.nrm(9,"ion-refresher-content"),e.k0s(),e.j41(10,"div",4)(11,"ion-segment",5),e.bIt("ionChange",function(S){return e.eBV(u),e.Njj(l.onIonSegmentChange(S))}),e.j41(12,"ion-segment-button",6)(13,"ion-label"),e.EFF(14),e.nI1(15,"translate"),e.k0s()(),e.j41(16,"ion-segment-button",7)(17,"ion-label"),e.EFF(18),e.nI1(19,"translate"),e.k0s()(),e.j41(20,"ion-segment-button",7)(21,"ion-label"),e.EFF(22),e.nI1(23,"translate"),e.k0s()(),e.j41(24,"ion-segment-button",7)(25,"ion-label"),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()(),e.DNE(28,p,3,1,"div",8)(29,h,5,3)(30,P,2,0,"ion-infinite-scroll",9),e.k0s(),e.DNE(31,C,14,5,"ng-template",null,0,e.C5r)}if(2&n){let u;e.R7$(3),e.Y8G("defaultHref",l.APP_ROUTE.TABS_DEFAULT),e.R7$(2),e.JRh(e.bMT(6,18,"ServiceHistory")),e.R7$(6),e.Y8G("value",null!==(u=l.filter.VRequestStatusMulti)&&void 0!==u?u:""),e.R7$(3),e.JRh(e.bMT(15,20,"All")),e.R7$(2),e.yjJ("value","",l.v_request_status.YeuCauDichVu,",",l.v_request_status.NhanVienDangDiDen,",",l.v_request_status.DangPhucVu,""),e.R7$(2),e.JRh(e.bMT(19,22,"Processing")),e.R7$(2),e.FS9("value",l.v_request_status.HoanTat),e.R7$(2),e.JRh(e.bMT(23,24,"Completed")),e.R7$(2),e.yjJ("value","",l.v_request_status.KhachHangHuy,",",l.v_request_status.TuChoiPhucVu,",",l.v_request_status.Loi,""),e.R7$(2),e.JRh(e.bMT(27,26,"Error")),e.R7$(2),e.vxM(28,l.requestServices.length?28:l.response?29:-1),e.R7$(2),e.Y8G("ngIf",l.paging.active)}},dependencies:[m.Sq,m.bT,m.T3,o.QW,o.ZB,o.W9,o.eU,o.Ax,o.Hp,o.he,o.To,o.Ki,o.Gp,o.eP,o.IO,o.BC,o.ai,o.Je,o.el,i.D9],styles:[".card-order[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast)}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-height:1.25rem;padding-top:.25rem;padding-bottom:.25rem;background:transparent}.card-order[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem;line-height:0;border:1px solid var(--ion-color-medium-tint)}"]}),v})()}];let b=(()=>{var r;class v{}return(r=v).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[k.iI.forChild($),k.iI]}),v})();var _=c(3890);let y=(()=>{var r;class v{}return(r=v).\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[m.MD,f.YN,o.bv,b,_.x]}),v})()}}]);