"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9006],{9777:(E,R,a)=>{a.d(R,{x:()=>v});var f=a(467),S=a(8833),l=a(9864),t=a(4438),C=a(7625),h=a(9465),M=a(4842);let v=(()=>{var P;class g{constructor(n,s,m){var b;this.router=n,this.modalController=s,this.toastController=m,this.APP_ROUTE=S._,this.routerUrl=null===(b=n.url)||void 0===b?void 0:b.replace(/^\//,"").replace(/\/$/,"")}ngOnInit(){}presentModalBarcodeScanning(n){var s=this;return(0,f.A)(function*(){(0,l.V)({modalController:s.modalController,toastController:s.toastController})})()}navigateByUrl(n){var s=this;return(0,f.A)(function*(){s.router.navigateByUrl(n)})()}}return(P=g).\u0275fac=function(n){return new(n||P)(t.rXU(C.Ix),t.rXU(h.W3),t.rXU(h.K_))},P.\u0275cmp=t.VBU({type:P,selectors:[["app-footer-tabs"]],decls:22,vars:20,consts:[[1,"px-0"],[3,"click"],["src","../../assets/icon/ion-icon/home.svg"],["src","../../assets/icon/tabs/service.svg"],["src","../../assets/icon/ion-icon/charge.svg"],["src","../../assets/icon/ion-icon/person.svg"]],template:function(n,s){1&n&&(t.j41(0,"ion-footer")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),t.bIt("click",function(){return s.navigateByUrl(s.APP_ROUTE.DAILY_WORK)}),t.nrm(3,"ion-icon",2),t.j41(4,"ion-label"),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.j41(7,"ion-tab-button",1),t.bIt("click",function(){return s.navigateByUrl(s.APP_ROUTE.REQUEST_PROCESSED)}),t.nrm(8,"ion-icon",3),t.j41(9,"ion-label"),t.EFF(10),t.nI1(11,"translate"),t.k0s()(),t.j41(12,"ion-tab-button",1),t.bIt("click",function(){return s.navigateByUrl(s.APP_ROUTE.CHARGING_SESSION)}),t.nrm(13,"ion-icon",4),t.j41(14,"ion-label"),t.EFF(15),t.nI1(16,"translate"),t.k0s()(),t.j41(17,"ion-tab-button",1),t.bIt("click",function(){return s.navigateByUrl(s.APP_ROUTE.USER)}),t.nrm(18,"ion-icon",5),t.j41(19,"ion-label"),t.EFF(20),t.nI1(21,"translate"),t.k0s()()()()),2&n&&(t.R7$(2),t.HbH(s.routerUrl==s.APP_ROUTE.DAILY_WORK?"tab-selected":""),t.R7$(3),t.JRh(t.bMT(6,12,"Home")),t.R7$(2),t.HbH(s.routerUrl==s.APP_ROUTE.REQUEST_PROCESSED?"tab-selected":""),t.R7$(3),t.JRh(t.bMT(11,14,"Service")),t.R7$(2),t.HbH(s.routerUrl==s.APP_ROUTE.CHARGING_SESSION?"tab-selected":""),t.R7$(3),t.JRh(t.bMT(16,16,"Charger")),t.R7$(2),t.HbH(s.routerUrl==s.APP_ROUTE.USER?"tab-selected":""),t.R7$(3),t.JRh(t.bMT(21,18,"User")))},dependencies:[h.M0,h.iq,h.he,h.Jq,h.qW,M.D9],styles:["ion-footer[_ngcontent-%COMP%]{border:0;box-shadow:none}ion-footer[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]{height:4rem;align-items:flex-end;--border: 0;--ion-background-color: transparent;background:var(--ion-color-light)}ion-footer[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]{max-width:none;height:auto;--padding-top: .5rem;--padding-end: 0;--padding-bottom: .5rem;--padding-start: 0;--color: var(--ion-color-medium);--background: transparent}ion-footer[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin:0}ion-footer[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{height:1rem;margin:.25rem 0 0;line-height:1rem;font-size:.625rem;font-family:Roboto Condensed,Roboto,Inter;font-weight:300;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   .btn-qrcode[_ngcontent-%COMP%]{align-items:flex-start}ion-footer[_ngcontent-%COMP%]   .btn-qrcode[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding:.5rem;margin:.5rem!important;border-radius:50%;color:#fff;background:#00a45f;box-shadow:0 0 0 .35rem #d6fee6}"]}),g})()},9006:(E,R,a)=>{a.r(R),a.d(R,{ChargingSessionPageModule:()=>j});var f=a(177),S=a(9417),l=a(9465),t=a(7625),C=a(467),h=a(6944),M=a(6539),v=a(8517),P=a(2021),g=a(3588),_=a(8833),n=a(4438),s=a(9777),m=a(4842);const b=r=>({$implicit:r});function T(r,d){1&r&&(n.j41(0,"div",14),n.nrm(1,"img",15),n.j41(2,"div",16),n.EFF(3),n.nI1(4,"translate"),n.k0s()()),2&r&&(n.R7$(3),n.JRh(n.bMT(4,1,"NoChargingSession")))}function O(r,d){if(1&r&&(n.qex(0),n.j41(1,"div",17),n.eu8(2,18),n.k0s(),n.bVm()),2&r){const u=d.$implicit;n.XpG();const e=n.sdS(35);n.R7$(2),n.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",n.eq3(2,b,u))}}function I(r,d){if(1&r){const u=n.RV6();n.j41(0,"ion-infinite-scroll",19),n.bIt("ionInfinite",function(i){n.eBV(u);const o=n.XpG();return n.Njj(o.onIonInfinite(i))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function F(r,d){if(1&r){const u=n.RV6();n.j41(0,"div",20),n.bIt("click",function(i){const o=n.eBV(u).$implicit,c=n.XpG();return n.Njj(c.openDetail(i,o))}),n.j41(1,"div",21)(2,"div",22)(3,"h6",23)(4,"b"),n.EFF(5),n.k0s()(),n.j41(6,"div")(7,"small",24),n.EFF(8),n.k0s()()(),n.j41(9,"div")(10,"ion-chip",25),n.EFF(11),n.k0s()()(),n.j41(12,"div",26)(13,"div",27)(14,"div",28)(15,"small"),n.EFF(16),n.nI1(17,"translate"),n.k0s()(),n.j41(18,"div",29)(19,"ion-chip",30),n.nrm(20,"ion-icon",31),n.k0s(),n.j41(21,"strong",24),n.EFF(22),n.k0s()()(),n.j41(23,"div",27)(24,"div",28)(25,"small"),n.EFF(26),n.nI1(27,"translate"),n.k0s()(),n.j41(28,"div",29)(29,"ion-chip",30),n.nrm(30,"ion-icon",32),n.k0s(),n.j41(31,"strong",24),n.EFF(32),n.k0s()()(),n.j41(33,"div",27)(34,"div",28)(35,"small"),n.EFF(36,"% PIN"),n.k0s()(),n.j41(37,"div",29)(38,"ion-chip",30),n.nrm(39,"ion-icon",33),n.k0s(),n.j41(40,"strong",24),n.EFF(41),n.k0s()()(),n.j41(42,"div",27)(43,"div",28)(44,"small"),n.EFF(45),n.nI1(46,"translate"),n.k0s()(),n.j41(47,"div",29)(48,"ion-chip",30),n.nrm(49,"ion-icon",34),n.k0s(),n.j41(50,"strong",24),n.EFF(51),n.nI1(52,"translate"),n.k0s()()()()()}if(2&r){let u,e,i;const o=d.$implicit,c=n.XpG();n.R7$(5),n.Lme("",o.ServiceName," (",o.CustomerFullName,")"),n.R7$(3),n.JRh(c.APP_FUNC_FormatDate(o.CreatedDate)),n.R7$(2),n.Y8G("color",c.APP_FUNC_GetColor_VSessionStatus(o.VSessionStatus)),n.R7$(),n.JRh(o.VSessionStatusName),n.R7$(5),n.JRh(n.bMT(17,19,"ElectricUsed")),n.R7$(3),n.Y8G("color",c.APP_FUNC_GetColor_VSessionStatus(o.VSessionStatus)),n.R7$(3),n.Lme("",c.APP_FUNC_RoundNumber(null!==(u=o.ElectricUsed)&&void 0!==u?u:0),"",null!==(u=o.Unit)&&void 0!==u?u:"kWh",""),n.R7$(4),n.JRh(n.bMT(27,21,"ChargingPackage")),n.R7$(3),n.Y8G("color",c.APP_FUNC_GetColor_VSessionStatus(o.VSessionStatus)),n.R7$(3),n.Lme("",null!==(e=o.MaxElectricUsed)&&void 0!==e?e:0,"",null!==(e=o.Unit)&&void 0!==e?e:"kWh",""),n.R7$(6),n.Y8G("color",c.APP_FUNC_GetColor_VSessionStatus(o.VSessionStatus)),n.R7$(3),n.SpI("",null!==(i=o.BatteryPercent)&&void 0!==i?i:0," %"),n.R7$(4),n.JRh(n.bMT(46,23,"Time")),n.R7$(3),n.Y8G("color",c.APP_FUNC_GetColor_VSessionStatus(o.VSessionStatus)),n.R7$(3),n.Lme("",c.getTimeCharging(o.ChargingStart,o.ChargingEnd)," ",n.bMT(52,25,"Minute"),"")}}const U=[{path:"",component:(()=>{var r;class d{constructor(e,i,o,c,p){this.router=e,this.activatedRoute=i,this.modalController=o,this.toastController=c,this.loadingController=p,this.APP_ROUTE=_._,this.APP_FUNC_FormatDate=v.Rv,this.APP_FUNC_DivDateTime=v.Wv,this.APP_FUNC_RoundNumber=v.Rw,this.APP_FUNC_GetColor_VSessionStatus=v.kH,this.v_session_status=g.jT,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.dataForm={},this.chargingSessions=[],this.limitLoad=0}ngOnInit(){var e=this;this.IsOnInit=!0;let i=this.activatedRoute.snapshot.queryParamMap.get("vss")||"";i&&(this.filter.VSessionStatus=parseInt(i)||void 0);let o=this.activatedRoute.snapshot.queryParamMap.get("vssm")||"";o&&(this.filter.VSessionStatusMulti=o||void 0),(0,C.A)(function*(){(yield(0,M.kU)())&&e.refreshData()})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(e){this.refreshData(()=>{e.target.complete()})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}pushData(e){1==this.paging.page&&(this.chargingSessions.length=0),this.chargingSessions=this.chargingSessions.concat(e)}refreshData(e){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(e)}loadMore(e){this.paging.page+=1,this.loadData_Paging_Limit(e)}searchChange(e){this.filter.search=e.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(e,i){this.paging.sortfield=e||null,this.paging.sorttype=i||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{vss:this.filter.VSessionStatus,vssm:this.filter.VSessionStatusMulti},queryParamsHandling:"merge",replaceUrl:!0}),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(e){var i=this;return(0,C.A)(function*(){if(i.limitLoad>0)return void(e&&e());i.limitLoad=300;let o=setInterval(()=>{i.limitLoad-=100,i.limitLoad<=0&&(clearInterval(o),i.loadData_Paging(e))},100)})()}loadData_Paging(e){var i=this;return(0,C.A)(function*(){i.paging.loading=!0,(0,h.UV)({loadingController:i.loadingController,params:{VSessionStatus:i.filter.VSessionStatus,VSessionStatusMulti:i.filter.VSessionStatusMulti,PageNumber:i.paging.page,PageSize:i.paging.limit},callback:o=>{var c;i.response=o,null!=o&&o.Succeeded?i.pushData(null!==(c=o.Data)&&void 0!==c?c:[]):(0,P.cX)(i.toastController,{},o).then(p=>p.present()),i.paging.loading=!1,i.paging.active=!(null==o||!o.HasNextPage),e&&e()}})})()}filterDate(e){var i=this;return(0,C.A)(function*(){i.dataForm.filterDate=e})()}changeVSessionStatus(e){this.filter.VSessionStatus=e.detail.value||void 0,this.filterChange()}changeVSessionStatusMulti(e){this.filter.VSessionStatusMulti=e.detail.value||void 0,this.filterChange()}getTimeCharging(e,i){return(0,v.Wv)(e,e?null!=i?i:new Date:null)}openDetail(e,i){var o=this;return(0,C.A)(function*(){var c,p;o.router.navigateByUrl(_._.CHARGING_SESSION_DETAIL.replace(":id",null!==(c=null===(p=i.ChargeSessionId)||void 0===p?void 0:p.toString())&&void 0!==c?c:""))})()}}return(r=d).\u0275fac=function(e){return new(e||r)(n.rXU(t.Ix),n.rXU(t.nX),n.rXU(l.W3),n.rXU(l.K_),n.rXU(l.Xi))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-charging-session"]],decls:36,vars:28,consts:[["templateChargingSession",""],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"container","px-0"],["mode","md",3,"ionChange","value"],["value",""],[3,"value"],["class","container container-loading py-5 text-center",4,"ngIf"],[1,"container","pt-3","pb-4"],[1,"row"],[4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],[1,"container","container-loading","py-5","text-center"],["src","../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[1,"col-12","col-lg-6","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ionInfinite"],[1,"card-day","rounded","bg-white","p-3","cursor-pointer",3,"click"],[1,"d-flex","align-items-start"],[1,"flex-grow-1"],[1,"my-0"],[1,"text-muted"],[1,"no-opacity","text-nowrap",3,"color"],[1,"row","mt-3"],[1,"col-6","mb-2"],[1,"mb-1"],[1,"d-flex","align-items-center"],[1,"ion-chip-icon",3,"color"],["src","../../../assets/icon/ion-icon/electric-2.svg"],["src","../../../assets/icon/ion-icon/changing-package-2.svg"],["src","../../../assets/icon/ion-icon/battery-3.svg"],["src","../../../assets/icon/ion-icon/time-2.svg"]],template:function(e,i){if(1&e){const o=n.RV6();n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1),n.nrm(3,"ion-back-button",2),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.nI1(6,"translate"),n.k0s()()(),n.j41(7,"ion-content",3)(8,"ion-refresher",4),n.bIt("ionRefresh",function(p){return n.eBV(o),n.Njj(i.onIonRefresher(p))}),n.nrm(9,"ion-refresher-content"),n.k0s(),n.j41(10,"div",5)(11,"ion-segment",6),n.bIt("ionChange",function(p){return n.eBV(o),n.Njj(i.changeVSessionStatusMulti(p))}),n.j41(12,"ion-segment-button",7)(13,"ion-label"),n.EFF(14),n.nI1(15,"translate"),n.k0s()(),n.j41(16,"ion-segment-button",8)(17,"ion-label"),n.EFF(18),n.nI1(19,"translate"),n.k0s()(),n.j41(20,"ion-segment-button",8)(21,"ion-label"),n.EFF(22),n.nI1(23,"translate"),n.k0s()(),n.j41(24,"ion-segment-button",8)(25,"ion-label"),n.EFF(26),n.nI1(27,"translate"),n.k0s()()()(),n.DNE(28,T,5,3,"div",9),n.j41(29,"div",10)(30,"div",11),n.DNE(31,O,3,4,"ng-container",12),n.k0s()(),n.DNE(32,I,2,0,"ion-infinite-scroll",13),n.k0s(),n.nrm(33,"app-footer-tabs"),n.DNE(34,F,53,27,"ng-template",null,0,n.C5r)}if(2&e){let o;n.R7$(3),n.Y8G("defaultHref",i.APP_ROUTE.DEFAULT),n.R7$(2),n.JRh(n.bMT(6,18,"ChargingSessionHistory")),n.R7$(2),n.Y8G("fullscreen",!0),n.R7$(4),n.Y8G("value",null!==(o=i.filter.VSessionStatusMulti)&&void 0!==o?o:""),n.R7$(3),n.JRh(n.bMT(15,20,"All")),n.R7$(2),n.FS9("value",i.v_session_status.DangSac),n.R7$(2),n.JRh(n.bMT(19,22,"Charging")),n.R7$(2),n.FCK("value","",i.v_session_status.DaSac,",",i.v_session_status.HoanTat,""),n.R7$(2),n.JRh(n.bMT(23,24,"Completed")),n.R7$(2),n.FCK("value","",i.v_session_status.HuyPhienSac,",",i.v_session_status.Loi,""),n.R7$(2),n.JRh(n.bMT(27,26,"Error")),n.R7$(2),n.Y8G("ngIf",i.response&&!i.chargingSessions.length),n.R7$(3),n.Y8G("ngForOf",i.chargingSessions),n.R7$(),n.Y8G("ngIf",i.paging.active)}},dependencies:[f.Sq,f.bT,f.T3,l.QW,l.ZB,l.W9,l.eU,l.iq,l.Ax,l.Hp,l.he,l.To,l.Ki,l.Gp,l.eP,l.BC,l.ai,l.Je,l.el,s.x,m.D9],styles:[".card-day.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-day[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:.25rem}.filter[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 1rem;--padding-end: 1rem;margin:.75rem .5rem}.status-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:.5rem;vertical-align:middle;font-size:1.2rem}.status-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.ion-chip-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 0;padding:.25rem}.ion-chip-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}"]}),d})()}];let D=(()=>{var r;class d{}return(r=d).\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[t.iI.forChild(U),t.iI]}),d})();var A=a(3664);let j=(()=>{var r;class d{}return(r=d).\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[f.MD,S.YN,l.bv,D,A.x]}),d})()},9864:(E,R,a)=>{a.d(R,{V:()=>P});var f=a(467),S=a(6013),l=a(5005),t=a(6539),C=a(2021),h=a(5083);const v=function(){var g=(0,f.A)(function*(_){(yield _.modalController.create({component:l.I,showBackdrop:!1,cssClass:"ion-modal-scanning barcode-scanning-modal"})).present()});return function(n){return g.apply(this,arguments)}}(),P=g=>{(0,t.kU)().then(function(){var _=(0,f.A)(function*(n){n&&(g=>{["ios","android"].includes(h.Ii.getPlatform())?S.vi.isSupported().then(_=>{_.supported?S.vi.checkPermissions().then(n=>{"granted"==n.camera?g.success():"denied"==n.camera?g.warning("B\u1ea1n \u0111\xe3 t\u1eeb ch\u1ed1i \u1ee9ng d\u1ee5ng truy c\u1eadp ch\u1ee9c n\u0103ng n\xe0y, h\xe3y b\u1eadt l\u1ea1i n\xf3 trong ph\u1ea7n c\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng tr\xean thi\u1ebft b\u1ecb!"):"prompt"==n.camera||"prompt-with-rationale"==n.camera?S.vi.requestPermissions().then(s=>{"granted"==s.camera?g.success():g.warning("denied"==s.camera?"B\u1ea1n \u0111\xe3 t\u1eeb ch\u1ed1i \u1ee9ng d\u1ee5ng truy c\u1eadp ch\u1ee9c n\u0103ng n\xe0y, h\xe3y b\u1eadt l\u1ea1i n\xf3 trong ph\u1ea7n c\xe0i \u0111\u1eb7t \u1ee9ng d\u1ee5ng tr\xean thi\u1ebft b\u1ecb!":"C\xf3 g\xec \u0111\xf3 kh\xf4ng \u0111\xfang! [#1]")}).catch(s=>{g.warning("C\xf3 g\xec \u0111\xf3 kh\xf4ng \u0111\xfang! [#2]")}):"limited"==n.camera&&g.error("Ch\u1ee9c n\u0103ng b\u1ecb gi\u1edbi h\u1ea1n! [#3]")}).catch(n=>{g.warning("C\xf3 g\xec \u0111\xf3 kh\xf4ng \u0111\xfang! [#4]")}):g.warning("Thi\u1ebft b\u1ecb kh\xf4ng h\u1ed7 tr\u1ee3 qu\xe9t m\xe3 QR")}):g.warning("Thi\u1ebft b\u1ecb kh\xf4ng h\u1ed7 tr\u1ee3 qu\xe9t m\xe3 QR")})({success:()=>{v({modalController:g.modalController})},error:s=>{(0,C.cX)(g.toastController,{color:"medium",message:s,duration:1e4}).then(m=>m.present())},warning:s=>{(0,C.cX)(g.toastController,{color:"warning",message:s,duration:600}).then(m=>{m.onDidDismiss().then(b=>{v({modalController:g.modalController})}),m.present()})}})});return function(n){return _.apply(this,arguments)}}())}}}]);