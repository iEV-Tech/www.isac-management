"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6846],{6846:(Re,I,g)=>{g.r(I),g.d(I,{RequestProcessedDetailPageModule:()=>Pe});var S=g(177),N=g(9417),m=g(9465),f=g(7625),p=g(467),G=g(7392),A=g(5083),X=g(7762),$=g(5312),R=g(3801),F=g(6944),D=g(7142),M=g(1038),V=g(6539),P=g(9136),b=g(6757),h=g(2678),E=g(3588),C=g(8833),e=g(4438),O=g(4842);function B(s,d){if(1&s&&(e.j41(0,"tr")(1,"td"),e.EFF(2,"Th\u1eddi gian h\u1eb9n s\u1ea1c"),e.k0s(),e.j41(3,"td")(4,"b"),e.EFF(5),e.k0s()()()),2&s){const o=e.XpG(2);e.R7$(5),e.E5c("",o.APP_FUNC_FormatDate(o.requestProcessed.ExecutionDate+" "+o.requestProcessed.ExecutionTime,"HH:mm")," - ",o.APP_FUNC_FormatDate(o.requestProcessed.ExecutionDate+" "+o.requestProcessed.ExecutionTimeTo,"HH:mm"),", ",o.APP_FUNC_FormatDate(o.requestProcessed.ExecutionDate+" "+o.requestProcessed.ExecutionTime,"DD/MM/YYYY"),"")}}function U(s,d){if(1&s&&(e.j41(0,"tr")(1,"td"),e.EFF(2,"\u0110i\u1ec3m \u0111\xf3n"),e.k0s(),e.j41(3,"td")(4,"b"),e.EFF(5),e.k0s()()(),e.j41(6,"tr")(7,"td"),e.EFF(8,"\u0110i\u1ec3m tr\u1ea3"),e.k0s(),e.j41(9,"td")(10,"b"),e.EFF(11),e.k0s()()()),2&s){const o=e.XpG(2);e.R7$(5),e.JRh(o.requestProcessed.RequestAddress),e.R7$(6),e.JRh(o.requestProcessed.DestAddress)}}function J(s,d){if(1&s&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&s){const o=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"Address")),e.R7$(4),e.JRh(o.requestProcessed.RequestAddress)}}function w(s,d){if(1&s&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&s){let o;const i=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,3,"DistanceRescure")),e.R7$(4),e.Lme("",null!==(o=i.requestProcessed.Distance)&&void 0!==o?o:i.getDistance(),"",null!==(o=i.requestProcessed.Unit)&&void 0!==o?o:"km","")}}function L(s,d){if(1&s&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&s){const o=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"ChargingPackage")),e.R7$(4),e.JRh(o.requestProcessed.ChargePackageName)}}function H(s,d){if(1&s&&(e.j41(0,"ion-select-option",34),e.EFF(1),e.k0s()),2&s){const o=d.$implicit;e.Y8G("value",o.LookupId),e.R7$(),e.JRh(o.Objectvalue)}}function Y(s,d){if(1&s&&e.nrm(0,"ion-img",37),2&s){const o=e.XpG(3);e.Y8G("src",o.imageUrl)}}function z(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",41),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.getCamera())}),e.nrm(1,"ion-icon",42),e.j41(2,"ion-label"),e.EFF(3,"Ch\u1ee5p \u1ea3nh xe"),e.k0s()()}}function K(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",43),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.getCamera())}),e.j41(1,"ion-label"),e.EFF(2,"Ch\u1ee5p l\u1ea1i"),e.k0s()()}}function W(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",25)(6,"ion-button",26),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(50);return e.Njj(null==t?null:t.dismiss())}),e.nrm(7,"ion-icon",27),e.k0s()()()(),e.j41(8,"ion-content",28)(9,"div",29)(10,"div",30)(11,"div",31)(12,"ion-item",32)(13,"ion-select",33),e.nI1(14,"translate"),e.nI1(15,"translate"),e.bIt("ionChange",function(t){e.eBV(o);const n=e.XpG(2);return e.Njj(n.changeTypeNote(t))}),e.Z7z(16,H,2,2,"ion-select-option",34,e.fX1),e.k0s()()(),e.j41(18,"div",31)(19,"ion-item",32)(20,"ion-textarea",35),e.bIt("ionChange",function(t){e.eBV(o);const n=e.XpG(2);return e.Njj(n.changeNote(t))}),e.k0s()()()(),e.j41(21,"div",36),e.DNE(22,Y,1,1,"ion-img",37)(23,z,4,0),e.k0s()()(),e.j41(24,"ion-footer",28)(25,"div",38),e.DNE(26,K,3,0,"ion-button",39),e.j41(27,"ion-button",40),e.bIt("click",function(t){e.eBV(o),e.XpG();const n=e.sdS(50),a=e.XpG();return e.Njj(a.refuseService(t,n))}),e.j41(28,"ion-label"),e.EFF(29),e.nI1(30,"translate"),e.k0s()()()()}if(2&s){const o=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,9,"CancelService")),e.R7$(10),e.Y8G("value",o.dataForm.TypeNote)("cancelText",e.bMT(14,11,"Close"))("okText",e.bMT(15,13,"Apply")),e.R7$(3),e.Dyx(o.v_cancel_process_reason._data),e.R7$(4),e.Y8G("autoGrow",!0)("value",o.dataForm.Note),e.R7$(2),e.vxM(22,o.imageUrl?22:23),e.R7$(4),e.vxM(26,o.imageUrl?26:-1),e.R7$(3),e.JRh(e.bMT(30,15,"CancelService"))}}function Z(s,d){if(1&s&&e.nrm(0,"ion-img",37),2&s){const o=e.XpG(3);e.Y8G("src",o.imageUrl)}}function Q(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",46),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.getCamera())}),e.nrm(1,"ion-icon",47),e.j41(2,"ion-label"),e.EFF(3,"Ch\u1ee5p \u1ea3nh xe"),e.k0s()()}}function ee(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",43),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.getCamera())}),e.j41(1,"ion-label"),e.EFF(2,"Ch\u1ee5p l\u1ea1i"),e.k0s()()}}function te(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"X\xe1c nh\u1eadn d\u1ecbch v\u1ee5"),e.k0s(),e.j41(4,"ion-buttons",25)(5,"ion-button",26),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(53);return e.Njj(null==t?null:t.dismiss())}),e.nrm(6,"ion-icon",27),e.k0s()()()(),e.j41(7,"ion-content",28)(8,"div",29)(9,"div",30)(10,"div",31)(11,"ion-item",32)(12,"ion-textarea",44),e.bIt("ionChange",function(t){e.eBV(o);const n=e.XpG(2);return e.Njj(n.changeNote(t))}),e.k0s()()()(),e.j41(13,"div",36),e.DNE(14,Z,1,1,"ion-img",37)(15,Q,4,0),e.k0s()()(),e.j41(16,"ion-footer",28)(17,"div",38),e.DNE(18,ee,3,0,"ion-button",39),e.j41(19,"ion-button",45),e.bIt("click",function(t){e.eBV(o),e.XpG();const n=e.sdS(53),a=e.XpG();return e.Njj(a.confirmService(t,n))}),e.j41(20,"ion-label"),e.EFF(21),e.nI1(22,"translate"),e.k0s()()()()}if(2&s){const o=e.XpG(2);e.R7$(12),e.Y8G("autoGrow",!0)("value",o.dataForm.Note),e.R7$(2),e.vxM(14,o.imageUrl?14:15),e.R7$(4),e.vxM(18,o.imageUrl?18:-1),e.R7$(3),e.JRh(e.bMT(22,5,"Confirm"))}}function ne(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",25)(6,"ion-button",26),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(56);return e.Njj(null==t?null:t.dismiss())}),e.nrm(7,"ion-icon",27),e.k0s()()()(),e.j41(8,"div",48)(9,"div"),e.EFF(10,"Ch\u1ecdn h\xecnh th\u1ee9c b\u1eaft \u0111\u1ea7u phi\xean s\u1ea1c (\u01b0u ti\xean s\u1ea1c online \u0111\u1ec3 qu\xe1 tr\xecnh s\u1ea1c t\u1ef1 \u0111\u1ed9ng di\u1ec5n ra)"),e.k0s()(),e.j41(11,"ion-footer")(12,"div",49)(13,"ion-button",50),e.bIt("click",function(t){e.eBV(o),e.XpG();const n=e.sdS(56),a=e.XpG();return e.Njj(a.offlineCharging(t,n))}),e.j41(14,"ion-label"),e.EFF(15),e.nI1(16,"translate"),e.k0s()(),e.j41(17,"ion-button",51),e.bIt("click",function(t){e.eBV(o),e.XpG();const n=e.sdS(56),a=e.XpG();return e.Njj(a.onlineCharging(t,n))}),e.j41(18,"ion-label"),e.EFF(19),e.nI1(20,"translate"),e.k0s()()()()}if(2&s){const o=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,5,"StartChargingSession")),e.R7$(10),e.Y8G("disabled",o.startCharging_Disabled),e.R7$(2),e.JRh(e.bMT(16,7,"OfflineCharging")),e.R7$(2),e.Y8G("disabled",o.startCharging_Disabled),e.R7$(2),e.JRh(e.bMT(20,9,"OnlineCharging"))}}function oe(s,d){if(1&s){const o=e.RV6();e.j41(0,"div",52)(1,"div",53)(2,"h4",54),e.EFF(3,"X\xe1c nh\u1eadn ho\xe0n t\u1ea5t d\u1ecbch v\u1ee5"),e.k0s()(),e.j41(4,"div",55)(5,"div",56)(6,"ion-button",57),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(59);return e.Njj(null==t?null:t.dismiss())}),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",58)(10,"ion-button",59),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(59),n=e.XpG();return e.Njj(n.confirmFinishRescure(t))}),e.EFF(11),e.nI1(12,"translate"),e.k0s()()()()}2&s&&(e.R7$(7),e.JRh(e.bMT(8,2,"Cancel")),e.R7$(4),e.JRh(e.bMT(12,4,"Completed")))}function ie(s,d){if(1&s){const o=e.RV6();e.j41(0,"div",60)(1,"ion-button",61),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(50);return e.Njj(null==t?null:t.present())}),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"ion-button",45),e.bIt("click",function(){e.eBV(o),e.XpG();const t=e.sdS(53);return e.Njj(null==t?null:t.present())}),e.j41(6,"ion-label"),e.EFF(7,"X\xe1c nh\u1eadn kh\xe1ch h\xe0ng"),e.k0s()()(),e.j41(8,"div",62)(9,"ion-button",63),e.bIt("click",function(t){e.eBV(o);const n=e.XpG(2);return e.Njj(n.openDirection(t))}),e.j41(10,"ion-label"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.nrm(13,"ion-icon",64),e.k0s()()}2&s&&(e.R7$(3),e.JRh(e.bMT(4,2,"CancelService")),e.R7$(8),e.JRh(e.bMT(12,4,"Direction")))}function se(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",45),e.bIt("click",function(){e.eBV(o);const t=e.XpG(3);return e.Njj(t.navigateByUrl(t.APP_ROUTE.CHARGING_SESSION_DETAIL.replace(":id",t.requestProcessed.ChargeSessionId.toString())))}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"GoToChargingSession")))}function ae(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",45),e.bIt("click",function(){e.eBV(o),e.XpG(3);const t=e.sdS(59);return e.Njj(null==t?null:t.present())}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"FinishRescure")))}function re(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",66),e.bIt("click",function(){e.eBV(o),e.XpG(3);const t=e.sdS(56);return e.Njj(t.present())}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"StartChargingSession")))}function le(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",61),e.bIt("click",function(){e.eBV(o),e.XpG(2);const t=e.sdS(50);return e.Njj(null==t?null:t.present())}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()(),e.DNE(4,ae,4,3,"ion-button",65)(5,re,4,3)}if(2&s){const o=e.XpG(3);e.R7$(2),e.JRh(e.bMT(3,2,"Refuse")),e.R7$(2),e.vxM(4,o.requestProcessed.VServiceType==o.v_service_type.CuuHo?4:5)}}function ce(s,d){if(1&s&&(e.j41(0,"div",60),e.DNE(1,se,4,3,"ion-button",65)(2,le,6,4),e.k0s()),2&s){const o=e.XpG(2);e.R7$(),e.vxM(1,o.requestProcessed.ChargeSessionId?1:2)}}function de(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-button",45),e.bIt("click",function(){e.eBV(o);const t=e.XpG(4);return e.Njj(t.navigateByUrl(t.APP_ROUTE.CHARGING_SESSION_DETAIL.replace(":id",t.requestProcessed.ChargeSessionId.toString())))}),e.j41(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"GoToChargingSession")))}function ue(s,d){if(1&s&&(e.j41(0,"div",60),e.DNE(1,de,4,3,"ion-button",65),e.k0s()),2&s){const o=e.XpG(3);e.R7$(),e.vxM(1,o.requestProcessed.ChargeSessionId?1:-1)}}function _e(s,d){if(1&s&&e.DNE(0,ue,2,1,"div",60),2&s){const o=e.XpG(2);e.vxM(0,o.requestProcessed.VServiceType!=o.v_service_type.CuuHo?0:-1)}}function me(s,d){if(1&s){const o=e.RV6();e.j41(0,"ion-content")(1,"ion-refresher",7),e.bIt("ionRefresh",function(t){e.eBV(o);const n=e.XpG();return e.Njj(n.onIonRefresher(t))}),e.nrm(2,"ion-refresher-content"),e.k0s(),e.nrm(3,"div",8),e.j41(4,"div",9)(5,"div",10)(6,"div",11)(7,"div",12)(8,"div",13)(9,"div",14),e.EFF(10),e.k0s(),e.j41(11,"ion-text",15),e.EFF(12),e.k0s()(),e.nrm(13,"hr",16),e.j41(14,"div",17)(15,"table",18)(16,"tr")(17,"td"),e.EFF(18,"Ng\u01b0\u1eddi y\xeau c\u1ea7u"),e.k0s(),e.j41(19,"td")(20,"b"),e.EFF(21),e.k0s()()(),e.j41(22,"tr")(23,"td"),e.EFF(24,"Th\u1eddi gian g\u1eedi y\xeau c\u1ea7u"),e.k0s(),e.j41(25,"td")(26,"b"),e.EFF(27),e.k0s()()(),e.DNE(28,B,6,3,"tr")(29,U,12,2)(30,J,7,4),e.k0s()()()(),e.j41(31,"div",11)(32,"div",19)(33,"div",13)(34,"div",20)(35,"b",21),e.EFF(36,"Chi ti\u1ebft d\u1ecbch v\u1ee5"),e.k0s()()(),e.nrm(37,"hr",16),e.j41(38,"div",17)(39,"table",18),e.DNE(40,w,7,5,"tr")(41,L,7,4),e.j41(42,"tr")(43,"td"),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"td")(47,"b"),e.EFF(48),e.k0s()()()()()()()()(),e.j41(49,"ion-modal",null,0),e.DNE(51,W,31,17,"ng-template"),e.k0s(),e.j41(52,"ion-modal",null,1),e.DNE(54,te,23,7,"ng-template"),e.k0s(),e.j41(55,"ion-modal",22,2),e.DNE(57,ne,21,11,"ng-template"),e.k0s(),e.j41(58,"ion-modal",23,3),e.DNE(60,oe,13,6,"ng-template"),e.k0s()(),e.j41(61,"ion-footer",24),e.DNE(62,ie,14,6)(63,ce,3,1)(64,_e,1,1),e.k0s()}if(2&s){let o,i;const t=e.XpG();e.R7$(10),e.JRh(t.requestProcessed.ServiceName),e.R7$(),e.Y8G("color",t.APP_FUNC_GetColor_VProcessStatus(t.requestProcessed.VProcessStatus)),e.R7$(),e.JRh(t.requestProcessed.VProcessStatusName),e.R7$(9),e.JRh(t.requestProcessed.CustomerFullName),e.R7$(6),e.JRh(t.APP_FUNC_FormatDate(t.requestProcessed.RequestDate,"HH:mm, DD/MM/YYYY")),e.R7$(),e.vxM(28,t.requestProcessed.ExecutionDate&&t.requestProcessed.ExecutionTime&&t.requestProcessed.ExecutionTimeTo?28:-1),e.R7$(),e.vxM(29,t.requestProcessed.VServiceType==t.v_service_type.CuuHo?29:30),e.R7$(11),e.vxM(40,t.requestProcessed.VServiceType==t.v_service_type.CuuHo?40:41),e.R7$(4),e.JRh(e.bMT(45,11,"PayValue")),e.R7$(4),e.SpI("",t.APP_FUNC_FormatMoney(null!==(o=t.requestProcessed.PayValue)&&void 0!==o?o:0),"\u0111"),e.R7$(14),e.vxM(62,(i=t.requestProcessed.VProcessStatus)===t.v_process_status.NhanDichVu?62:i===t.v_process_status.DangPhucVu?63:i===t.v_process_status.HoanTat?64:-1)}}const ge=[{path:"",component:(()=>{var s;class d{constructor(i,t,n,a,l,c){var _;this.router=i,this.activatedRoute=t,this.modalController=n,this.animationController=a,this.toastController=l,this.loadingController=c,this.APP_ROUTE=C._,this.APP_FUNC_FormatDate=P.Rv,this.APP_FUNC_FormatMoney=P.xi,this.APP_FUNC_GetColor_VProcessStatus=P.R0,this.v_process_status=E.Sx,this.v_cancel_process_reason=E.B1,this.v_service_type=E.kA,this.dataForm={};let r=null!==(_=t.snapshot.params.id)&&void 0!==_?_:"";r&&(this.RequestProcessedId=parseFloat(r))}ngOnInit(){var i=this;this.IsOnInit=!0,(0,p.A)(function*(){(yield(0,V.kU)())&&i.refreshData(()=>{i.refreshCurrentPosition(()=>{})})})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(i){this.refreshData(()=>{i.target.complete()})}refreshData(i){var t=this;return(0,p.A)(function*(){(0,D.P1)({params:{RequestProcessedId:t.RequestProcessedId},callback:n=>{var a,l,c,_,r;t.response=n,null!=n&&n.Succeeded?(t.requestProcessed=null!==(a=n.Data)&&void 0!==a?a:{},t.customerPosition={lat:null!==(l=null===(c=t.requestProcessed)||void 0===c?void 0:c.RequestLat)&&void 0!==l?l:0,lng:null!==(_=null===(r=t.requestProcessed)||void 0===r?void 0:r.RequestLong)&&void 0!==_?_:0}):(0,h.cX)(t.toastController,{},n).then(u=>{u.onDidDismiss().then(v=>{t.router.navigateByUrl(C._.DEFAULT)}),u.present()}),i&&i()}})})()}initMap(){var i=this;const t=function(){var a=(0,p.A)(function*(){let l,c,r=window.google.maps;const{Map:u}=yield r.importLibrary("maps"),{AdvancedMarkerElement:v}=yield r.importLibrary("marker");let j=new u(document.getElementById("map"),{zoom:12,center:i.customerPosition,disableDefaultUI:!0,mapId:"DEMO_MAP_ID"});i.customerPosition&&(l=new v({map:j,position:i.customerPosition,title:"V\u1ecb tr\xed kh\xe1ch h\xe0ng \u0111\u1eb7t l\u1ecbch"})),i.employePosition&&(c=new v({map:j,position:i.employePosition,title:"V\u1ecb tr\xed nh\xe2n vi\xean iSAC"})),i.customerPosition&&i.employePosition&&setTimeout(()=>{var k,x,T,q,ve=r.DirectionsService(),y=r.DirectionsRenderer();y.setMap(j),ve.route({origin:r.LatLng(null===(k=i.employePosition)||void 0===k?void 0:k.lat,null===(x=i.employePosition)||void 0===x?void 0:x.lng),destination:r.LatLng(null===(T=i.customerPosition)||void 0===T?void 0:T.lat,null===(q=i.customerPosition)||void 0===q?void 0:q.lng),travelMode:"DRIVING"},function(Ce,fe){"OK"==fe&&y.setDirections(Ce)})},1e3)});return function(){return a.apply(this,arguments)}}();window.initMap=t;let n=document.createElement("script");n.async=!0,n.src=`https://maps.google.com/maps/api/js?key=${$.c.apiKey}&libraries=places,marker,routes&callback=initMap&loading=async`,document.head.append(n)}refreshCurrentPosition(i){var t=this;return(0,p.A)(function*(){let n=()=>{(0,R.Xz)().then(a=>{t.employePosition=a,i&&i()})};X.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var a=(0,p.A)(function*(l){if(l.coords){var c={lat:l.coords.latitude,lng:l.coords.longitude};yield(0,R.fj)({params:c})}n()});return function(l){return a.apply(this,arguments)}}()).catch(()=>{n()})})()}navigateByUrl(i){this.router.navigateByUrl(i)}getDistance(){var i,t,n,a;return(0,P.Rw)((0,P.GH)({lat:null===(i=this.requestProcessed)||void 0===i?void 0:i.RequestLat,lng:null===(t=this.requestProcessed)||void 0===t?void 0:t.RequestLong},{lat:null===(n=this.requestProcessed)||void 0===n?void 0:n.DestLat,lng:null===(a=this.requestProcessed)||void 0===a?void 0:a.DestLong}),10)}getDistance2CL(){return this.employePosition&&this.customerPosition?(0,P.Rw)((0,P.GH)(this.employePosition,this.customerPosition),10):0}getTime2CL(){return this.employePosition&&this.customerPosition?(0,P.Rw)(3*(0,P.GH)(this.employePosition,this.customerPosition),1):0}openDirection(i){var t=this;return(0,p.A)(function*(){var n,a;yield G.P.open({url:(0,P.LZ)(null!==(n=t.employePosition)&&void 0!==n?n:yield(0,R.Xz)(),null!==(a=t.customerPosition)&&void 0!==a?a:yield(0,R.Xz)())})})()}refuseService(i,t){var n=this;return(0,p.A)(function*(){var a=[];n.imageFile&&a.push(new Promise((c,_)=>{(0,M.v)({loadingController:n.loadingController,params:{file:n.imageFile,subFolder:"ServiceCancel",fileType:"image"},callback:r=>{0==(null==r?void 0:r.ReturnCode)?(n.dataForm.FilePath=`${r.path}/${r.file.name}`,n.imageFile=void 0):(0,h.cX)(n.toastController,{},r).then(u=>u.present()),c(r)}})}));var l=()=>{var c,_,r;n.dataForm.TypeNote?n.dataForm.Note?n.dataForm.FilePath||n.dataForm.TypeNote!=E.B1.TuChoiKhongPhaiXeVIP?(0,D.Is)({loadingController:n.loadingController,params:{RequestProcessedId:null===(c=n.requestProcessed)||void 0===c?void 0:c.RequestProcessedId,VCancelProcessReason:n.dataForm.TypeNote,CancelReason:null===(_=n.dataForm)||void 0===_?void 0:_.Note,CancelReasonImages:null===(r=n.dataForm)||void 0===r?void 0:r.FilePath},callback:u=>{null!=u&&u.Succeeded?(null==t||t.dismiss(),n.router.navigateByUrl(C._.REQUEST_PROCESSED),(0,h.cX)(n.toastController,{color:"danger",message:"\u0110\xe3 h\u1ee7y d\u1ecbch v\u1ee5"}).then(v=>v.present())):(0,h.cX)(n.toastController,{},u).then(v=>v.present())}}):(0,h.cX)(n.toastController,{color:"warning",message:"Y\xeau c\u1ea7u g\u1eedi \u1ea3nh ch\u1ee5p \u1ea3nh \u0111\xednh k\xe8m!"}).then(u=>u.present()):(0,h.cX)(n.toastController,{color:"warning",message:"Nh\u1eadp l\xed do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5!"}).then(u=>u.present()):(0,h.cX)(n.toastController,{color:"warning",message:"Ch\u1ecdn danh m\u1ee5c t\u1eeb ch\u1ed1i th\u1ef1c hi\u1ec7n d\u1ecbch v\u1ee5!"}).then(u=>u.present())};a.length?Promise.all(a).then(()=>{l()}):l()})()}confirmService(i,t){var n=this;return(0,p.A)(function*(){var a=[];n.imageFile&&a.push(new Promise((c,_)=>{(0,M.v)({loadingController:n.loadingController,params:{file:n.imageFile,subFolder:"ServiceAccept",fileType:"image"},callback:r=>{0==(null==r?void 0:r.ReturnCode)?(n.dataForm.FilePath=`${r.path}/${r.file.name}`,n.imageFile=void 0):(0,h.cX)(n.toastController,{},r).then(u=>u.present()),c(r)}})}));var l=()=>{var c,_,r;n.dataForm.FilePath?(0,D.w7)({loadingController:n.loadingController,params:{RequestServiceId:null===(c=n.requestProcessed)||void 0===c?void 0:c.RequestServiceId,AcceptNotes:null===(_=n.dataForm)||void 0===_?void 0:_.Note,AcceptImages:null===(r=n.dataForm)||void 0===r?void 0:r.FilePath},callback:u=>{null!=u&&u.Succeeded?(null==t||t.dismiss(),n.refreshData(()=>{})):(0,h.cX)(n.toastController,{},u).then(v=>v.present())}}):(0,h.cX)(n.toastController,{color:"warning",message:"Vui l\xf2ng ch\u1ee5p \u1ea3nh xe \u0111\u1ec3 x\xe1c nh\u1eadn d\u1ecbch v\u1ee5!"}).then(u=>u.present())};a.length?Promise.all(a).then(()=>{l()}):l()})()}offlineCharging(i,t){var n=this;return(0,p.A)(function*(){var a,l;n.startCharging_Disabled=!0,(0,F.Cl)({loadingController:n.loadingController,params:{RequestProcessedId:null===(a=n.requestProcessed)||void 0===a?void 0:a.RequestProcessedId,ChargeSessionId:null===(l=n.requestProcessed)||void 0===l?void 0:l.ChargeSessionId,IsFinish:!1},callback:c=>{var _,r;null!=c&&c.Succeeded&&null!=c&&c.Data?(null==t||t.dismiss(),n.router.navigateByUrl(C._.CHARGING_SESSION_DETAIL.replace(":id",null!==(_=null==c||null===(r=c.Data)||void 0===r?void 0:r.toString())&&void 0!==_?_:""))):((0,h.cX)(n.toastController,{},c).then(u=>u.present()),n.startCharging_Disabled=!1)}})})()}onlineCharging(i,t){var n=this;return(0,p.A)(function*(){var a;n.startCharging_Disabled=!0,(0,F.aN)({loadingController:n.loadingController,params:{RequestProcessedId:null===(a=n.requestProcessed)||void 0===a?void 0:a.RequestProcessedId},callback:l=>{var c,_;null!=l&&l.Succeeded&&null!=l&&l.Data?(null==t||t.dismiss(),n.router.navigateByUrl(C._.CHARGING_SESSION_DETAIL.replace(":id",null!==(c=null==l||null===(_=l.Data)||void 0===_?void 0:_.toString())&&void 0!==c?c:""))):((0,h.cX)(n.toastController,{},l).then(r=>r.present()),n.startCharging_Disabled=!1)}})})()}confirmFinishRescure(i){var t=this;return(0,p.A)(function*(){var n;(0,F.IJ)({loadingController:t.loadingController,params:{RequestProcessedId:null===(n=t.requestProcessed)||void 0===n?void 0:n.RequestProcessedId},callback:a=>{null!=a&&a.Succeeded&&null!=a&&a.Data?(null==i||i.dismiss(),t.refreshData()):(0,h.cX)(t.toastController,{},a).then(l=>l.present())}})})()}changeTypeNote(i){var t=this;return(0,p.A)(function*(){t.dataForm.TypeNote=i.detail.value})()}changeNote(i){var t=this;return(0,p.A)(function*(){var n;t.dataForm.Note=null===(n=i.detail.value)||void 0===n?void 0:n.trim(),console.log(t.dataForm)})()}getCamera(){var i=this;return(0,p.A)(function*(){["ios","android"].includes(A.Ii.getPlatform())?(0,b.x)({toastController:i.toastController,modalController:i.modalController},t=>{null!=t&&t.length&&(0,b.IM)(t[0],n=>{i.imageFile=n,i.imageUrl=URL.createObjectURL(n)})}):(0,b.$3)({toastController:i.toastController,modalController:i.modalController},t=>{null!=t&&t.length&&(0,b.IM)(t[0],n=>{i.imageFile=n,i.imageUrl=URL.createObjectURL(n)})})})()}}return(s=d).\u0275fac=function(i){return new(i||s)(e.rXU(f.Ix),e.rXU(f.nX),e.rXU(m.W3),e.rXU(m.Hx),e.rXU(m.K_),e.rXU(m.Xi))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-request-processed-detail"]],decls:8,vars:5,consts:[["modalRefuseService",""],["modalConfirmService",""],["modalStartCharging",""],["modalConfirmFinishRescure",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"bg"],[1,"container","mt-5"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-6","mb-4"],[1,"card-service","h-100","bg-white","rounded","p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"fs-18","fw-700"],[1,"fs-14",3,"color"],[1,"mt-2","mb-2"],[1,"d-flex","align-items-start"],[1,"table","table-borderless","m-0"],[1,"card-vehicle","h-100","bg-white","rounded","p-3"],[1,"text-ellipsis"],[1,"mr-1"],[1,"ion-modal-auto"],[1,"ion-modal-small"],[1,"ion-padding-vertical"],["slot","end"],[3,"click"],["name","close-outline",1,"fs-24"],[1,"ion-padding"],[1,"w-100","min-h-100","d-flex","flex-column","align-items-center","justify-content-center"],[1,"w-100"],[1,"mb-3","ion-item-input"],["lines","none"],["placeholder","Ch\u1ecdn danh m\u1ee5c t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5","interface","action-sheet",3,"ionChange","value","cancelText","okText"],[3,"value"],["maxlength","250","placeholder","Nh\u1eadp l\xed do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5!",3,"ionChange","autoGrow","value"],[1,"flex-grow-1","d-flex","flex-column","align-items-center","justify-content-center"],[1,"max-w-100","max-h-100",3,"src"],[1,"d-flex"],["color","medium","shape","round","expand","block",1,"flex-grow-1","m-1"],["color","danger","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click"],["color","medium","fill","outline",3,"click"],["slot","start","name","camera-outline"],["color","medium","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click"],["maxlength","250","placeholder","Nh\u1eadp l\xed do n\u1ebfu c\xf3",3,"ionChange","autoGrow","value"],["color","primary","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click"],["color","medium",3,"click"],["slot","start","fill","outline","name","camera-outline"],[1,"ion-padding","mb-4"],[1,"d-flex","p-2"],["color","primary","shape","round","fill","outline","expand","block",1,"flex-grow-1","m-1",3,"click","disabled"],["color","primary","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click","disabled"],[1,"p-4"],[1,"text-center"],[1,"mb-4"],[1,"row"],[1,"col-6","pr-1"],["color","medium","fill","outline","shape","round","expand","block",3,"click"],[1,"col-6","pl-1"],["color","primary","shape","round","expand","block",3,"click"],[1,"container","d-flex","align-items-center","justify-content-between"],["color","warning","shape","round","fill","outline","expand","block",1,"flex-grow-1","m-1",3,"click"],[1,"container","d-flex"],["color","primary","shape","round","fill","outline","expand","block",1,"flex-grow-1","m-1",3,"click"],["slot","end","src","../../../assets/icon/ion-icon/direction.svg"],["color","primary","shape","round","expand","block",1,"flex-grow-1","m-1"],["color","primary","shape","round","expand","block","fill","outline",1,"flex-grow-1","m-1",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"ion-header",4)(1,"ion-toolbar")(2,"ion-buttons",5),e.nrm(3,"ion-back-button",6),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.DNE(7,me,65,13)),2&i&&(e.R7$(3),e.Y8G("defaultHref",t.APP_ROUTE.DEFAULT),e.R7$(2),e.JRh(e.bMT(6,3,"ServiceDetail")),e.R7$(2),e.vxM(7,t.requestProcessed?7:-1))},dependencies:[m.Jm,m.QW,m.W9,m.M0,m.eU,m.iq,m.KW,m.uz,m.he,m.To,m.Ki,m.Nm,m.Ip,m.IO,m.nc,m.BC,m.ai,m.Sb,m.Je,m.Gw,m.el,O.D9],styles:[".bg[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;width:100%;height:150px;background-color:var(--ion-color-primary);background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:center center;background-size:auto 200%}.card-service.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-service[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-service[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-vehicle.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-vehicle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}.card-package.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}"]}),d})()}];let pe=(()=>{var s;class d{}return(s=d).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[f.iI.forChild(ge),f.iI]}),d})();var he=g(3664);let Pe=(()=>{var s;class d{}return(s=d).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[S.MD,N.YN,m.bv,pe,he.x]}),d})()}}]);