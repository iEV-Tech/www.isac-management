"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2069],{9946:(B,A,c)=>{c.d(A,{ks:()=>T,sh:()=>h,z:()=>p});var O=c(467),l=c(5972);const p=function(){var n=(0,O.A)(function*(g){g.params=g.params||{},(0,l.hm)({url:"api/User/get-user",params:{},success:_=>{"function"==typeof g.callback&&g.callback(_.data||null)},error:_=>{var u;"function"==typeof g.callback&&g.callback(null==_||null===(u=_.response)||void 0===u?void 0:u.data),console.error(_)},loading:g.loading,loadingController:g.loadingController})});return function(_){return n.apply(this,arguments)}}(),T=function(){var n=(0,O.A)(function*(g){var _,u,E,v,f,m;g.params=g.params||{},(0,l.IH)({url:"api/User/update-user",params:{FullName:null!==(_=g.params.FullName)&&void 0!==_?_:null,PersonEmail:null!==(u=g.params.Email)&&void 0!==u?u:null,Phone:null!==(E=g.params.Phone)&&void 0!==E?E:null,Address:null!==(v=g.params.Address)&&void 0!==v?v:null,Gender:null!==(f=g.params.Gender)&&void 0!==f?f:null,Birthday:null!==(m=g.params.Birthday)&&void 0!==m?m:null},success:S=>{"function"==typeof g.callback&&g.callback(S.data||null)},error:S=>{var D;"function"==typeof g.callback&&g.callback(null==S||null===(D=S.response)||void 0===D?void 0:D.data),console.error(S)},loading:g.loading,loadingController:g.loadingController})});return function(_){return n.apply(this,arguments)}}(),h=function(){var n=(0,O.A)(function*(g){var _,u;g.params=g.params||{},(0,l.IH)({url:"api/User/update-avatar",params:{UserId:null!==(_=g.params.UserId)&&void 0!==_?_:null,Avatar:null!==(u=g.params.Avatar)&&void 0!==u?u:null},success:E=>{"function"==typeof g.callback&&g.callback(E.data||null)},error:E=>{var v;"function"==typeof g.callback&&g.callback(null==E||null===(v=E.response)||void 0===v?void 0:v.data),console.error(E)},loading:g.loading,loadingController:g.loadingController})});return function(_){return n.apply(this,arguments)}}()},8420:(B,A,c)=>{c.d(A,{Q:()=>U});var O=c(467),l=c(9316),p=c(6029),T=c(119),n=c(4438),g=c(4842),_=c(177),u=c(9465);function E(d,M){1&d&&(n.qex(0),n.nrm(1,"img",5),n.bVm())}function v(d,M){1&d&&(n.qex(0),n.nrm(1,"img",6),n.bVm())}function f(d,M){1&d&&(n.qex(0),n.j41(1,"ion-label",10),n.EFF(2,"Ti\u1ebfng Vi\u1ec7t"),n.k0s(),n.j41(3,"ion-avatar",11),n.nrm(4,"img",5),n.k0s(),n.bVm())}function m(d,M){1&d&&(n.qex(0),n.j41(1,"ion-label",10),n.EFF(2,"English"),n.k0s(),n.j41(3,"ion-avatar",11),n.nrm(4,"img",6),n.k0s(),n.bVm())}function S(d,M){if(1&d){const P=n.RV6();n.j41(0,"ion-item",9),n.bIt("click",function(b){const j=n.eBV(P).$implicit,x=n.XpG(2);return n.Njj(x.changeLang(b,j))}),n.qex(1,1),n.DNE(2,f,5,0,"ng-container",3)(3,m,5,0,"ng-container",3),n.bVm(),n.k0s()}if(2&d){const P=M.$implicit;n.R7$(),n.Y8G("ngSwitch",P),n.R7$(),n.Y8G("ngSwitchCase","vi"),n.R7$(),n.Y8G("ngSwitchCase","en")}}function D(d,M){if(1&d&&(n.j41(0,"ion-list",7),n.DNE(1,S,4,3,"ion-item",8),n.k0s()),2&d){const P=n.XpG();n.R7$(),n.Y8G("ngForOf",P.translates)}}T.config({driver:[T.INDEXEDDB,T.LOCALSTORAGE,T.WEBSQL],name:"_config",version:1});const G={create:(d=(0,O.A)(function*(){return T}),function(){return d.apply(this,arguments)}),get:function(){var d=(0,O.A)(function*(M){return T.getItem(M)});return function(P){return d.apply(this,arguments)}}(),set:function(){var d=(0,O.A)(function*(M,P){return T.setItem(M,P)});return function(P,F){return d.apply(this,arguments)}}()};var d;let U=(()=>{var d;class M{constructor(F){this.translateService=F,this.translate=F,this.translates=F.getLangs()}ngOnInit(){}changeLang(F,b){var j=this;return(0,O.A)(function*(){var x,N;(b=null!==(x=b)&&void 0!==x?x:null==F||null===(N=F.target)||void 0===N?void 0:N.value)&&(j.translate.use(b),yield G.set("lang",b),(0,p.w)({params:{DeviceKey:(yield l.p.getId()).identifier},callback:X=>{window.location.reload()}}))})()}}return(d=M).\u0275fac=function(F){return new(F||d)(n.rXU(g.c$))},d.\u0275cmp=n.VBU({type:d,selectors:[["app-select-language"]],decls:8,vars:3,consts:[["id","click-trigger","shape","clear"],[3,"ngSwitch"],["name","caret-down-outline"],[4,"ngSwitchCase"],["trigger","click-trigger","triggerAction","click","side","bottom","alignment","center","dismiss-on-select","true"],["src","../../../../assets/i18n/flag/vi-VN.svg"],["src","../../../../assets/i18n/flag/en-US.svg"],["mode","ios","lines","none"],["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["slot","start"],["slot","end",1,"mr-0"]],template:function(F,b){1&F&&(n.j41(0,"ion-button",0),n.qex(1,1),n.nrm(2,"ion-icon",2),n.j41(3,"ion-avatar"),n.DNE(4,E,2,0,"ng-container",3)(5,v,2,0,"ng-container",3),n.k0s(),n.bVm(),n.k0s(),n.j41(6,"ion-popover",4),n.DNE(7,D,2,1,"ng-template"),n.k0s()),2&F&&(n.R7$(),n.Y8G("ngSwitch",b.translate.currentLang),n.R7$(3),n.Y8G("ngSwitchCase","vi"),n.R7$(),n.Y8G("ngSwitchCase","en"))},dependencies:[_.Sq,_.ux,_.e1,u.mC,u.Jm,u.iq,u.uz,u.he,u.nf,u.CF],styles:["ion-button[_ngcontent-%COMP%]{min-height:auto;margin:0;--padding-top: 0;--padding-start: 0;--padding-end: 0;--padding-bottom: 0;--box-shadow: none}ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:.25rem;font-size:1rem;color:var(--ion-color-light)}ion-button[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{border-radius:50%;width:2rem;height:2rem;border:1px solid rgba(229,229,229,.8)}ion-popover[_ngcontent-%COMP%]{--width: auto}ion-popover[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--ion-color-dark)}ion-popover[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;white-space:nowrap}"]}),M})()},6171:(B,A,c)=>{c.d(A,{A:()=>_});var O=c(6757),l=c(4438),p=c(9465),T=c(177),h=c(9362),n=c(4842);function g(u,E){if(1&u){const v=l.RV6();l.qex(0),l.j41(1,"div")(2,"image-cropper",6),l.bIt("imageCropped",function(m){l.eBV(v);const S=l.XpG();return l.Njj(S.imageCropped(m))})("imageLoaded",function(m){l.eBV(v);const S=l.XpG();return l.Njj(S.imageLoaded(m))})("cropperReady",function(){l.eBV(v);const m=l.XpG();return l.Njj(m.cropperReady())})("loadImageFailed",function(){l.eBV(v);const m=l.XpG();return l.Njj(m.loadImageFailed())}),l.k0s()(),l.bVm()}if(2&u){const v=l.XpG();l.R7$(2),l.Y8G("imageFile",v.file)("maintainAspectRatio",!0)("aspectRatio",1)("format",v.croppedImageFormat)}}let _=(()=>{var u;class E{constructor(f){this.modalController=f,this.croppedImageFormat="png"}ngOnInit(){}close(){this.modalController.dismiss()}submit(){this.croppedImage?(0,O.hy)(this.croppedImage,this.croppedImageFormat,f=>{f?this.modalController.dismiss(f,"submit"):this.close()}):this.close()}imageCropped(f){var m;this.croppedImage=null!==(m=f.objectUrl)&&void 0!==m?m:void 0}imageLoaded(f){}cropperReady(){}loadImageFailed(){}}return(u=E).\u0275fac=function(f){return new(f||u)(l.rXU(p.W3))},u.\u0275cmp=l.VBU({type:u,selectors:[["app-modal-photo-cropper"]],inputs:{file:"file"},decls:15,vars:7,consts:[[1,"h-100","d-flex","align-items-center","justify-content-center"],[4,"ngIf"],[1,"container","px-2","py-3","d-flex","align-items-stretch","justify-content-around"],[1,"flex-grow-1","mx-1"],["color","medium","shape","round","fill","outline","expand","block",3,"click"],["color","primary","shape","round","expand","block",3,"click"],[3,"imageCropped","imageLoaded","cropperReady","loadImageFailed","imageFile","maintainAspectRatio","aspectRatio","format"]],template:function(f,m){1&f&&(l.j41(0,"ion-content")(1,"div",0),l.DNE(2,g,3,4,"ng-container",1),l.k0s()(),l.j41(3,"ion-footer")(4,"div",2)(5,"div",3)(6,"ion-button",4),l.bIt("click",function(){return m.close()}),l.j41(7,"ion-label"),l.EFF(8),l.nI1(9,"translate"),l.k0s()()(),l.j41(10,"div",3)(11,"ion-button",5),l.bIt("click",function(){return m.submit()}),l.j41(12,"ion-label"),l.EFF(13),l.nI1(14,"translate"),l.k0s()()()()()),2&f&&(l.R7$(2),l.Y8G("ngIf",m.file),l.R7$(6),l.JRh(l.bMT(9,3,"Cancel")),l.R7$(5),l.JRh(l.bMT(14,5,"Complete")))},dependencies:[T.bT,p.Jm,p.W9,p.M0,p.he,h._D,n.D9]}),E})()},2069:(B,A,c)=>{c.r(A),c.d(A,{HomePageModule:()=>dn});var O=c(177),l=c(9417),p=c(9465),T=c(7625),h=c(467),n=c(4438),g=c(2385),_=c(6171),u=c(7392),E=c(5083),v=c(7762),f=c(5312),m=c(3801),S=c(6841),D=c(4470),G=c(7168),U=c(1038),d=c(9946),M=c(6539),P=c(8517),F=c(6757),b=c(2021),j=c(3588),x=c(8833),N=c(3731),X=c(8420),w=c(4842);const Y=["spyElement"],z=()=>["android","ios"],J=r=>({$implicit:r});function W(r,C){if(1&r&&(n.qex(0),n.j41(1,"div",37)(2,"div",38)(3,"div")(4,"div"),n.EFF(5),n.k0s()()()(),n.bVm()),2&r){const s=n.XpG();n.R7$(5),n.JRh(s.totalNotifyUnread<100?s.totalNotifyUnread:"99+")}}function K(r,C){if(1&r){const s=n.RV6();n.j41(0,"ion-button",39),n.bIt("click",function(t){n.eBV(s);const i=n.XpG();return n.Njj(i.presentModalVoice(t))}),n.nrm(1,"ion-icon",40),n.k0s()}}function Z(r,C){if(1&r&&(n.qex(0),n.j41(1,"b"),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.bVm()),2&r){const s=n.XpG().$implicit;n.R7$(2),n.JRh(n.bMT(3,1,s.text))}}function Q(r,C){if(1&r){const s=n.RV6();n.qex(0),n.j41(1,"ion-button",44),n.bIt("click",function(t){n.eBV(s);const i=n.XpG().$implicit,o=n.XpG();return n.Njj(o.clearFilter(t,i))}),n.j41(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.nrm(5,"ion-icon",45),n.k0s(),n.bVm()}if(2&r){const s=n.XpG().$implicit;n.R7$(3),n.JRh(n.bMT(4,1,s.text))}}function q(r,C){if(1&r){const s=n.RV6();n.qex(0),n.j41(1,"ion-button",44),n.bIt("click",function(t){n.eBV(s);const i=n.XpG().$implicit,o=n.XpG();return n.Njj(o.clearFilter(t,i))}),n.j41(2,"ion-label"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.nrm(5,"ion-icon",45),n.k0s(),n.bVm()}if(2&r){const s=n.XpG().$implicit;n.R7$(3),n.JRh(n.bMT(4,1,s.text))}}function nn(r,C){if(1&r&&(n.qex(0)(1,41),n.DNE(2,Z,4,3,"ng-container",42)(3,Q,6,3,"ng-container",42)(4,q,6,3,"ng-container",43),n.bVm()()),2&r){const s=C.$implicit;n.R7$(),n.Y8G("ngSwitch",s.type),n.R7$(),n.Y8G("ngSwitchCase","Nearby"),n.R7$(),n.Y8G("ngSwitchCase","Search")}}function tn(r,C){if(1&r&&(n.qex(0),n.j41(1,"div",46),n.eu8(2,47),n.k0s(),n.bVm()),2&r){const s=C.$implicit;n.XpG();const e=n.sdS(55);n.R7$(2),n.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",n.eq3(2,J,s))}}function en(r,C){1&r&&(n.qex(0),n.j41(1,"div",48),n.nrm(2,"ion-img",49),n.j41(3,"div",50),n.EFF(4),n.nI1(5,"translate"),n.k0s()(),n.bVm()),2&r&&(n.R7$(4),n.JRh(n.bMT(5,1,"DataNotFound")))}function on(r,C){if(1&r){const s=n.RV6();n.j41(0,"ion-infinite-scroll",51),n.bIt("ionInfinite",function(t){n.eBV(s);const i=n.XpG();return n.Njj(i.onIonInfinite(t))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function an(r,C){if(1&r&&(n.qex(0),n.nrm(1,"ion-icon",65),n.j41(2,"small")(3,"b"),n.EFF(4),n.k0s(),n.j41(5,"b",66),n.EFF(6),n.k0s()(),n.j41(7,"small",67)(8,"b",66),n.EFF(9),n.nI1(10,"translate"),n.k0s()(),n.bVm()),2&r){let s,e;const t=n.XpG().$implicit;n.R7$(3),n.HbH(t.TotalConnectorReady?"text-primary":"text-danger"),n.R7$(),n.JRh(null!==(s=t.TotalConnectorReady)&&void 0!==s?s:0),n.R7$(2),n.SpI("/",null!==(e=t.TotalConnector)&&void 0!==e?e:0,""),n.R7$(3),n.JRh(n.bMT(10,5,"ConnectorReady"))}}function rn(r,C){if(1&r&&(n.qex(0),n.nrm(1,"ion-icon",68),n.j41(2,"small")(3,"b"),n.EFF(4),n.k0s()(),n.bVm()),2&r){const s=n.XpG().$implicit,e=n.XpG();n.R7$(2),n.ZvI("ml-1 text-",e.APP_FUNC_GetColor_VLocationStatus(s.VLocationStatus),""),n.R7$(2),n.JRh(s.VLocationStatusName)}}function ln(r,C){if(1&r){const s=n.RV6();n.j41(0,"div",52)(1,"div",53),n.bIt("click",function(t){const i=n.eBV(s).$implicit,o=n.XpG();return n.Njj(o.openDetail(t,i))}),n.j41(2,"div",54)(3,"ion-avatar"),n.nrm(4,"img",55),n.k0s(),n.j41(5,"div",56)(6,"small"),n.EFF(7),n.k0s()()(),n.j41(8,"div",57)(9,"h5",58)(10,"b"),n.EFF(11,"\xa0"),n.k0s(),n.j41(12,"div",59)(13,"b"),n.EFF(14),n.k0s()()(),n.j41(15,"div",60)(16,"small"),n.EFF(17,"\xa0"),n.k0s(),n.j41(18,"div",59)(19,"small"),n.EFF(20),n.k0s()()()()(),n.j41(21,"div",20),n.DNE(22,an,11,7,"ng-container",16)(23,rn,5,4,"ng-container",16),n.k0s(),n.j41(24,"div",61)(25,"small",62),n.EFF(26),n.k0s(),n.j41(27,"ion-button",63),n.bIt("click",function(t){const i=n.eBV(s).$implicit,o=n.XpG();return n.Njj(o.openDirection(t,i))}),n.j41(28,"ion-label"),n.EFF(29),n.nI1(30,"translate"),n.k0s(),n.nrm(31,"ion-icon",64),n.k0s()()()}if(2&r){const s=C.$implicit,e=n.XpG();n.R7$(7),n.SpI("",s.Distance2CL,"km"),n.R7$(7),n.JRh(s.LocName),n.R7$(6),n.JRh(s.LocAddress),n.R7$(2),n.Y8G("ngIf",s.VLocationStatus==e.v_location_status.SanSang),n.R7$(),n.Y8G("ngIf",s.VLocationStatus!=e.v_location_status.SanSang),n.R7$(3),n.JRh(s.ConnectorType),n.R7$(3),n.JRh(n.bMT(30,7,"Direction"))}}const cn=[{path:"",component:(()=>{var r;class C{constructor(e,t,i,o,a){this.router=e,this.modalController=t,this.animationController=i,this.toastController=o,this.loadingController=a,this.platform=E.Ii.getPlatform(),this.readfile_url=f.c.readfile_url,this.APP_ROUTE=x._,this.v_location_status=j.Ix,this.APP_FUNC_GetColor_VLocationStatus=P.Bb,this.APP_FUNC_FormatMobileNumber=P.IV,this.APP_FUNC_GetLocImage=P.Zn,this.paging={sortfield:null,sorttype:null,page:1,limit:10,loading:!1,active:!0},this.filter={},this.currentPosition=f.c.app_default.geolocation.pos,this.chargingLocations=[],this.scrollTopOld=0,this.scrollTopNew=0,this.spyScrollActiveElement=1,this.spyScrolling=!1,this.spyScrollStep=100}ngOnInit(){(0,m.fA)({callback:e=>{null!=e&&e.currentAddress&&(this.currentAddress=null==e?void 0:e.currentAddress)}}),(0,M.lJ)().then(e=>{e&&((0,d.z)({callback:t=>{var i;null!=t&&t.Succeeded&&(this.user=null!==(i=t.Data)&&void 0!==i?i:{})}}),(0,G.kM)({callback:t=>{null!=t&&t.Succeeded&&(this.notifySumary=t.Data)}}))}),this.refreshData(()=>{this.refreshData_And_CurrentPosition()})}onIonRefresher(e){(0,m.fA)({callback:t=>{null!=t&&t.currentAddress&&(this.currentAddress=null==t?void 0:t.currentAddress)}}),(0,M.lJ)().then(t=>{t&&((0,d.z)({callback:i=>{var o;null!=i&&i.Succeeded&&(this.user=null!==(o=i.Data)&&void 0!==o?o:{})}}),(0,G.kM)({callback:i=>{null!=i&&i.Succeeded&&(this.notifySumary=i.Data)}}))}),this.filter={},this.refreshData_And_CurrentPosition(()=>{e.target.complete()})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}pushData(e,t){1==this.paging.page&&(this.chargingLocations.length=0),this.chargingLocations=this.chargingLocations.concat(e).filter(i=>i.VLocationStatus==j.Ix.SanSang).map(i=>(i.Distance2CL=parseFloat((0,P.GH)(this.currentPosition,{lat:null==i?void 0:i.LocLat,lng:null==i?void 0:i.LocLong}).toFixed(2)),i)).sort((i,o)=>{var a,y;return(null!==(a=i.Distance2CL)&&void 0!==a?a:0)-(null!==(y=o.Distance2CL)&&void 0!==y?y:0)}),t&&t(this.chargingLocations)}totalData(){return this.chargingLocations.length}refreshData_And_CurrentPosition(e){var t=this;return(0,h.A)(function*(){let i=()=>{(0,m.Xz)().then(o=>{t.currentPosition=o,t.requestAddress(o),t.refreshData(e)})};v.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var o=(0,h.A)(function*(a){if(a.coords){var y={lat:a.coords.latitude,lng:a.coords.longitude};yield(0,m.fj)({params:y})}i()});return function(a){return o.apply(this,arguments)}}()).catch(()=>{i()})})()}refreshData(e){var t=this;return(0,h.A)(function*(){t.filter={},t.paging.page=1,t.paging.active=!0,t.loadData_Paging(e)})()}loadMore(e){this.paging.page+=1,this.loadData_Paging(e)}searchChange(e){this.filter={},this.filter.search=e.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}sortChange(e,t){this.paging.sortfield=e||null,this.paging.sorttype=t||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging(()=>{this.spyScroll(0,0)})}loadData_Paging(e){var t=this;return(0,h.A)(function*(){if(t.paging.loading=!0,t.filter.search)(0,S.tC)({params:{Search:t.filter.search,PageNumber:t.paging.page,PageSize:t.paging.limit},callback:o=>{var a;t.response=o,null!=o&&o.Succeeded?t.pushData(null!==(a=o.Data)&&void 0!==a?a:[]):(0,b.cX)(t.toastController,{},o).then(y=>y.present()),t.paging.loading=!1,t.paging.active=!(null==o||!o.HasNextPage),e&&e()}});else if(t.filter.ElectricTypeFilter||t.filter.ConnectorTypeFilter||t.filter.VConnectorStatusFilter||t.filter.VChargeSpeed)(0,S.Zd)({params:{ElectricTypeFilter:t.filter.ElectricTypeFilter,ConnectorTypeFilter:t.filter.ConnectorTypeFilter,VConnectorStatusFilter:t.filter.VConnectorStatusFilter,VChargeSpeed:t.filter.VChargeSpeed,PageNumber:t.paging.page,PageSize:t.paging.limit},callback:o=>{var a;t.response=o,null!=o&&o.Succeeded?t.pushData(null!==(a=o.Data)&&void 0!==a?a:[]):(0,b.cX)(t.toastController,{},o).then(y=>y.present()),t.paging.loading=!1,t.paging.active=!(null==o||!o.HasNextPage),e&&e()}});else{var i=yield(0,m.Xz)();(0,S.Bc)({params:{TopLeftLat:i.lat+.1,TopLeftLong:i.lng-.1,RightBottomLat:i.lat-.1,RightBottomLong:i.lng+.1,PageNumber:t.paging.page,PageSize:t.paging.limit},callback:o=>{var a;t.response=o,null!=o&&o.Succeeded?(t.pushData(null!==(a=o.Data)&&void 0!==a?a:[]),0==t.totalData()&&1==t.paging.page&&(t.filter.VConnectorStatusFilter=j.EF.DangRanh,t.filterChange())):(0,b.cX)(t.toastController,{},o).then(y=>y.present()),t.paging.loading=!1,t.paging.active=!(null==o||!o.HasNextPage),e&&e()}})}})()}get totalNotifyUnread(){var e,t;return null!==(e=null===(t=this.notifySumary)||void 0===t?void 0:t.TotalUnread)&&void 0!==e?e:0}changeAvatar(e){var t=this;return(0,h.A)(function*(){(0,F.$3)({modalController:t.modalController,toastController:t.toastController},function(){var i=(0,h.A)(function*(o){if(o.length){let a=yield t.modalController.create({component:_.A,componentProps:{file:o[0]},backdropDismiss:!0,keyboardClose:!0});a.onDidDismiss().then(function(){var y=(0,h.A)(function*(R){"submit"==R.role&&R.data&&(0,U.v)({loadingController:t.loadingController,params:{file:R.data,subFolder:"avatar",fileType:"image"},callback:I=>{var H;0==(null==I?void 0:I.ReturnCode)?(0,d.sh)({loadingController:t.loadingController,params:{UserId:null===(H=t.user)||void 0===H?void 0:H.UserId,Avatar:`${I.path}/${I.file.name}`},callback:L=>{null!=L&&L.Succeeded?(0,d.z)({loadingController:t.loadingController,callback:V=>{var $;null!=V&&V.Succeeded&&(t.user=null!==($=V.Data)&&void 0!==$?$:{})}}):(0,b.cX)(t.toastController,{},L).then(V=>V.present())}}):(0,b.cX)(t.toastController,{},I).then(L=>L.present())}})});return function(R){return y.apply(this,arguments)}}()),a.present()}});return function(o){return i.apply(this,arguments)}}())})()}changeAvatar2(e){var t=this;return(0,h.A)(function*(){(0,P.oG)({accept:"image/*"},function(){var i=(0,h.A)(function*(o){(0,U.v)({loadingController:t.loadingController,params:{file:o[0],subFolder:"avatar",fileType:"image"},callback:a=>{var y;0==(null==a?void 0:a.ReturnCode)?(0,d.sh)({loadingController:t.loadingController,params:{UserId:null===(y=t.user)||void 0===y?void 0:y.UserId,Avatar:`${a.path}/${a.file.name}`},callback:R=>{null!=R&&R.Succeeded?(0,d.z)({loadingController:t.loadingController,callback:k=>{var I;null!=k&&k.Succeeded&&(t.user=null!==(I=k.Data)&&void 0!==I?I:{})}}):(0,b.cX)(t.toastController,{},R).then(k=>k.present())}}):(0,b.cX)(t.toastController,{},a).then(R=>R.present())}})});return function(o){return i.apply(this,arguments)}}())})()}navigateByUrl(e){var t=this;return(0,h.A)(function*(){t.router.navigateByUrl(e)})()}navigateToMap(){var e=this;return(0,h.A)(function*(){e.router.navigateByUrl(x._.TABS_MAP)})()}openDirection(e,t){return(0,h.A)(function*(){e.preventDefault(),yield u.P.open({url:(0,P.LZ)(yield(0,m.Xz)(),{lat:null==t?void 0:t.LocLat,lng:null==t?void 0:t.LocLong})})})()}openDetail(e,t){var i=this;return(0,h.A)(function*(){var o,a;i.navigateByUrl(x._.CHARGING_LOCATION_DETAIL.replace(":id",null!==(o=null===(a=t.ChargeLocationId)||void 0===a?void 0:a.toString())&&void 0!==o?o:""))})()}getDistance2CL(e){return(0,P.Rw)((0,P.GH)(this.currentPosition,{lat:null==e?void 0:e.LocLat,lng:null==e?void 0:e.LocLong}),100)}getFilters(){var e=[];if(this.filter.search&&e.push({type:"Search",value:this.filter.search,text:this.filter.search}),this.filter.ElectricTypeFilter)switch(this.filter.ElectricTypeFilter){case 1:e.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"AC"});break;case 2:e.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"DC"});break;case 3:e.push({type:"ElectricTypeFilter",value:this.filter.ElectricTypeFilter,text:"AllElectricType"})}if(this.filter.VConnectorStatusFilter)switch(this.filter.VConnectorStatusFilter){case 2500:e.push({type:"VConnectorStatusFilter",value:this.filter.VConnectorStatusFilter,text:"ConnectorReady"});break;case 2599:e.push({type:"VConnectorStatusFilter",value:this.filter.VConnectorStatusFilter,text:"AllConnectorStatus"})}return this.filter.ConnectorTypeFilter&&this.filter.ConnectorTypeFilter.split(";").forEach(t=>{e.push({type:"ConnectorTypeFilter",value:t,text:t})}),this.filter.VChargeSpeed&&j.My._data.filter(t=>t.LookupId==this.filter.VChargeSpeed).forEach(t=>{e.push({type:"VChargeSpeed",value:t.LookupId,text:t.Objectvalue})}),e.length||e.push({type:"Nearby",value:"Nearby",text:"ChargingStationNearby"}),e}clearFilter(e,t){var i=this;return(0,h.A)(function*(){if("Search"==t.type)i.filter.search=void 0;else if("ElectricTypeFilter"==t.type)i.filter.ElectricTypeFilter=void 0;else if("VConnectorStatusFilter"==t.type)i.filter.VConnectorStatusFilter=void 0;else if("ConnectorTypeFilter"==t.type){var o;i.filter.ConnectorTypeFilter=null===(o=i.filter.ConnectorTypeFilter)||void 0===o?void 0:o.split(";").filter(a=>a!=t.value).join(";")}else"VChargeSpeed"==t.type&&(i.filter.VChargeSpeed=void 0);i.filterChange()})()}get getChargingLocationss(){this.chargingLocations.forEach(a=>{a.Distance2CL=this.getDistance2CL(a)});var e=this.chargingLocations.sort((a,y)=>{var R,k;return(null!==(R=a.Distance2CL)&&void 0!==R?R:0)-(null!==(k=y.Distance2CL)&&void 0!==k?k:0)}),t=[];for(let a=0,y=Math.ceil(e.length/3);a<y;a++)t.push(e.slice(3*a,3*a+3));return t}refreshCurrentPosition(e){var t=this;return(0,h.A)(function*(){v.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var i=(0,h.A)(function*(o){if(o.coords){var a={lat:o.coords.latitude,lng:o.coords.longitude};yield(0,m.fj)({params:a}),t.refreshData()}});return function(o){return i.apply(this,arguments)}}())})()}presentModalFilterChargingLocationComponent(e){var t=this;return(0,h.A)(function*(){const i=yield t.modalController.create({component:g.T,componentProps:{filter:Object.assign({},t.filter,{search:null})},backdropDismiss:!0,keyboardClose:!0,cssClass:"ion-modal-filter",enterAnimation:o=>(0,b.l9)(t.animationController,o),leaveAnimation:o=>(0,b.CV)(t.animationController,o)});i.onDidDismiss().then(o=>{"clear"==o.role?(t.filter={},t.filterChange()):"submit"==o.role&&(t.filter=o.data,t.filterChange())}),i.present()})()}presentModalNotify(e){var t=this;return(0,h.A)(function*(){(0,b.He)(t.modalController,t.animationController,{router:t.router,fnDismiss:()=>{(0,G.kM)({callback:i=>{null!=i&&i.Succeeded&&(t.notifySumary=i.Data)}})}})})()}presentModalVoice(e){var t=this;return(0,h.A)(function*(){(0,N.b)({modalController:t.modalController,toastController:t.toastController,fnSuccess:i=>{i&&(t.filter.search=i,t.filterChange())},fnError:i=>{i&&(0,b.cX)(t.toastController,{color:"warning",message:i}).then(o=>o.present())}})})()}requestAddress(e){(0,D.S)({params:{lat:e.lat,lng:e.lng},callback:t=>{var i,o,a;"OK"==(null==t?void 0:t.status)&&(this.currentAddress=null!==(i=(null!==(o=t.results[0])&&void 0!==o?o:{}).formatted_address)&&void 0!==i?i:null===(a=t.plus_code)||void 0===a?void 0:a.compound_code,(0,m.RR)({params:{currentAddress:this.currentAddress}}))}})}handleScrollStart(){this.scrollTopOld=this.scrollTopNew}handleScrollEnd(){}handleScroll(e){this.scrollTopNew=e.detail.scrollTop,this.spyScroll(this.scrollTopNew-this.scrollTopOld,this.scrollTopNew)}spyScroll(e,t){var i;if(!this.spyScrolling)if(t>this.spyScrollStep&&1==this.spyScrollActiveElement)this.spyScrollActiveElement=2,null!==(i=this.spyElementRef)&&void 0!==i&&i.nativeElement&&this.animationController.create().addElement(this.spyElementRef.nativeElement).duration(300).keyframes([{offset:0,height:"90px",opacity:"1"},{offset:1,height:"0px",opacity:"0"}]).afterStyles({display:"none"}).play();else if(t<this.spyScrollStep&&2==this.spyScrollActiveElement){var o;this.spyScrollActiveElement=1,null!==(o=this.spyElementRef)&&void 0!==o&&o.nativeElement&&this.animationController.create().addElement(this.spyElementRef.nativeElement).duration(300).beforeStyles({display:"block"}).keyframes([{offset:0,height:"0px",opacity:"0"},{offset:1,height:"90px",opacity:"1"}]).play()}}}return(r=C).\u0275fac=function(e){return new(e||r)(n.rXU(T.Ix),n.rXU(p.W3),n.rXU(p.Hx),n.rXU(p.K_),n.rXU(p.Xi))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-home"]],viewQuery:function(e,t){if(1&e&&n.GBs(Y,5,n.aKT),2&e){let i;n.mGM(i=n.lsd())&&(t.spyElementRef=i.first)}},decls:56,vars:26,consts:[["spyElement",""],["templateChargingLocation",""],[3,"ionScrollStart","ionScrollEnd","ionScroll","fullscreen","scrollEvents"],["slot","fixed",3,"ionRefresh"],["color","primary"],[1,"py-2"],[1,"overflow-hidden"],[1,"text-center","line-height-0"],["src","../../../assets/icon/ion-img/infipower-61x9.png","alt","infipower",1,"infipower"],[1,"container","px-0","pb-3","d-flex","align-items-center"],[3,"click"],[3,"src"],[1,"flex-grow-1","px-2","text-white","line-height-1"],[1,"pl-2","position-relative"],[1,"btn-notify",3,"click"],["src","../../../assets/icon/ion-icon/bell.svg"],[4,"ngIf"],[1,"container","px-0","mb-1"],[1,"text-white"],[1,"container","px-0","container-location"],[1,"d-flex","align-items-center"],[1,"col","px-0"],["color","light"],["mode","md","show-clear-button","never","show-cancel-button","never",3,"ionChange","ionClear","placeholder","value"],["class","btn-microphone",3,"click",4,"ngIf"],[1,"col-auto","pl-2","pr-0"],[1,"btn-filter",3,"click"],["src","../../../assets/icon/ion-icon/filter.svg"],[1,"container","container-charging-location"],[1,"d-flex","align-items-center","mb-3"],[1,"col","d-flex","flex-nowrap","list-filters","overflow-auto","text-nowrap","align-items-center","px-3"],[4,"ngFor","ngForOf"],[1,"col-auto","pl-2","line-height-0"],["size","small","color","warning","shape","round",3,"click"],[1,"mr-1"],["slot","end","src","../../../assets/icon/ion-icon/location-3.svg"],[3,"ionInfinite",4,"ngIf"],[1,"position-absolute","notify-unread"],[1,"notify-circle-num"],[1,"btn-microphone",3,"click"],["src","../../../assets/icon/ion-icon/microphone.svg"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","ios","size","small","shape","round","color","primary",3,"click"],["slot","end","name","close-outline"],[1,"px-3","mb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"container","container-loading","py-5","text-center"],["src","../../../assets/icon/ion-img/no-data.svg"],[1,"text-muted","mt-4"],[3,"ionInfinite"],[1,"card-day","bg-white","p-2"],[1,"d-flex","align-items-start","cursor-pointer",3,"click"],[1,"col-auto","px-0"],["src","../../../assets/image/favicon.png"],[1,"text-danger","text-center"],[1,"col","pl-2","pr-0"],[1,"mt-0","mb-1","position-relative"],[1,"position-absolute","top-0","left-0","w-100","text-ellipsis"],[1,"position-relative"],[1,"d-flex","justify-content-between","mt-1"],[1,"align-self-end","text-muted"],["size","small","shape","round","color","primary",3,"click"],["src","../../../assets/icon/ion-icon/direction.svg","slot","end"],["color","primary","src","../../../assets/icon/ion-icon/electric.svg",1,"fs-4"],[1,"text-muted"],[1,"ml-2"],["color","primary","src","../../../assets/icon/ion-icon/changing-station.svg",1,"fs-4"]],template:function(e,t){if(1&e){const i=n.RV6();n.j41(0,"ion-content",2),n.bIt("ionScrollStart",function(){return n.eBV(i),n.Njj(t.handleScrollStart())})("ionScrollEnd",function(){return n.eBV(i),n.Njj(t.handleScrollEnd())})("ionScroll",function(a){return n.eBV(i),n.Njj(t.handleScroll(a))}),n.j41(1,"ion-refresher",3),n.bIt("ionRefresh",function(a){return n.eBV(i),n.Njj(t.onIonRefresher(a))}),n.nrm(2,"ion-refresher-content"),n.k0s(),n.j41(3,"ion-header",4)(4,"ion-toolbar")(5,"div",5)(6,"div",6,0)(8,"div",7),n.nrm(9,"img",8),n.k0s(),n.j41(10,"div",9)(11,"ion-thumbnail",10),n.bIt("click",function(a){return n.eBV(i),n.Njj(null!=t.user&&t.user.UserId?t.changeAvatar(a):null)}),n.nrm(12,"img",11),n.k0s(),n.j41(13,"div",12)(14,"small"),n.EFF(15),n.nI1(16,"translate"),n.k0s(),n.j41(17,"div")(18,"small")(19,"strong"),n.EFF(20),n.nI1(21,"translate"),n.k0s()()()(),n.nrm(22,"app-select-language"),n.j41(23,"div",13)(24,"ion-button",14),n.bIt("click",function(a){return n.eBV(i),n.Njj(t.presentModalNotify(a))}),n.nrm(25,"ion-icon",15),n.k0s(),n.DNE(26,W,6,1,"ng-container",16),n.k0s()(),n.j41(27,"div",17)(28,"small",18),n.EFF(29),n.nI1(30,"translate"),n.k0s()()(),n.j41(31,"div",19)(32,"div",20)(33,"div",21)(34,"ion-chip",22)(35,"ion-searchbar",23),n.nI1(36,"translate"),n.bIt("ionChange",function(a){return n.eBV(i),n.Njj(t.searchChange(a))})("ionClear",function(a){return n.eBV(i),n.Njj(t.searchChange(a))}),n.k0s(),n.DNE(37,K,2,0,"ion-button",24),n.k0s()(),n.j41(38,"div",25)(39,"ion-button",26),n.bIt("click",function(a){return n.eBV(i),n.Njj(t.presentModalFilterChargingLocationComponent(a))}),n.nrm(40,"ion-icon",27),n.k0s()()()()()()(),n.j41(41,"div",28)(42,"div",29)(43,"div",30),n.DNE(44,nn,5,3,"ng-container",31),n.k0s(),n.j41(45,"div",32)(46,"ion-button",33),n.bIt("click",function(){return n.eBV(i),n.Njj(t.navigateToMap())}),n.j41(47,"ion-label",34),n.EFF(48),n.nI1(49,"translate"),n.k0s(),n.nrm(50,"ion-icon",35),n.k0s()()(),n.DNE(51,tn,3,4,"ng-container",31),n.k0s(),n.DNE(52,en,6,3,"ng-container",16)(53,on,2,0,"ion-infinite-scroll",36),n.k0s(),n.DNE(54,ln,32,9,"ng-template",null,1,n.C5r)}if(2&e){let i,o;n.Y8G("fullscreen",!0)("scrollEvents",!1),n.R7$(12),n.Y8G("src",null!=t.user&&t.user.Avatar?t.readfile_url+(null==t.user?null:t.user.Avatar):"assets/icon/ion-img/no-avatar.svg",n.B4B),n.R7$(3),n.SpI("",n.bMT(16,15,"Wellcome"),","),n.R7$(5),n.JRh(null!==(i=null==t.user?null:t.user.FullName)&&void 0!==i?i:n.bMT(21,17,"Customers")),n.R7$(6),n.Y8G("ngIf",t.totalNotifyUnread),n.R7$(3),n.SpI("",n.bMT(30,19,"CurrentLocation"),":"),n.R7$(6),n.FS9("placeholder",null!==(o=t.currentAddress)&&void 0!==o?o:n.bMT(36,21,"FindChargingLocation")),n.Y8G("value",t.filter.search),n.R7$(2),n.Y8G("ngIf",n.lJ4(25,z).includes(t.platform)),n.R7$(7),n.Y8G("ngForOf",t.getFilters()),n.R7$(4),n.JRh(n.bMT(49,23,"OpenMap")),n.R7$(3),n.Y8G("ngForOf",t.chargingLocations),n.R7$(),n.Y8G("ngIf",t.response&&!t.chargingLocations.length),n.R7$(),n.Y8G("ngIf",t.paging.active)}},dependencies:[O.Sq,O.bT,O.T3,O.ux,O.e1,O.fG,p.mC,p.Jm,p.ZB,p.W9,p.eU,p.iq,p.KW,p.Ax,p.Hp,p.he,p.To,p.Ki,p.S1,p.Zx,p.ai,p.Gw,X.Q,w.D9],styles:["ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--ion-toolbar-background: var(--ion-color-primary) url(bg-charging-location.24bf138423cec5f5.svg) center / auto 100% no-repeat}ion-header[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 2.5rem;--border-radius: 50%;border:1px solid var(--ion-color-light);margin:0;background:var(--ion-color-light)}ion-header[_ngcontent-%COMP%]   .btn-language[_ngcontent-%COMP%]{min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: 50%;--border-width: 1px;--border-style: solid;--border-color: rgb(229, 229, 229, .8);--background: var(--ion-color-light);--color: var(--ion-color-dark)}ion-header[_ngcontent-%COMP%]   .btn-notify[_ngcontent-%COMP%]{min-width:2.5rem;min-height:2.5rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: 50%;--border-width: 1px;--border-style: solid;--border-color: rgb(229, 229, 229, .8);--background: var(--ion-color-light);--color: var(--ion-color-dark)}ion-header[_ngcontent-%COMP%]   .btn-notify[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint);font-size:1rem}ion-header[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint);font-size:1.125rem}ion-header[_ngcontent-%COMP%]   .btn-microphone[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint);font-size:1.375rem}ion-header[_ngcontent-%COMP%]   app-select-language[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-light)}ion-header[_ngcontent-%COMP%]   .notify-unread[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1.25rem}ion-header[_ngcontent-%COMP%]   .notify-unread[_ngcontent-%COMP%]   .notify-circle-num[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:1.125rem;height:1.125rem;border-radius:100%;background-color:var(--ion-color-danger);color:var(--ion-color-danger-contrast)}ion-header[_ngcontent-%COMP%]   .notify-unread[_ngcontent-%COMP%]   .notify-circle-num[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;align-items:center;justify-content:center}ion-header[_ngcontent-%COMP%]   .notify-unread[_ngcontent-%COMP%]   .notify-circle-num[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:.555rem;line-height:1}ion-header[_ngcontent-%COMP%]   .infipower[_ngcontent-%COMP%]{height:.5625rem;margin-bottom:-.0625rem}.container-location[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;width:100%;min-height:2.5rem;border-radius:2.5rem;padding-inline-start:.5rem;padding-inline-end:.5rem;padding-top:.25rem;padding-bottom:.25rem;background:var(--ion-color-light);color:var(--ion-color-medium);padding-inline-end:.25rem}.container-location[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;margin-right:.25rem;font-size:1rem}.container-location[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{flex-grow:1}.container-location[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:2rem;min-height:2rem;margin-left:.5rem;--box-shadow: none;--border-width: 0}.container-location[_ngcontent-%COMP%]   .current-address[_ngcontent-%COMP%]{position:relative}.container-location[_ngcontent-%COMP%]   .current-address[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform:translateY(-50%);position:absolute;top:50%;left:0;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.container-location[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:2.5rem;min-height:2.5rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: 50%;--border-width: 1px;--border-style: solid;--border-color: rgb(229, 229, 229, .8);--background: var(--ion-color-light);--color: var(--ion-color-dark)}.container-location[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint)}.container-location[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint);font-size:1.125rem}.container-location[_ngcontent-%COMP%]   .btn-microphone[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark-tint);font-size:1.375rem}.container-charging-location[_ngcontent-%COMP%]{padding:1rem 0 1px}.container-charging-location[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--box-shadow: none}.card-map[_ngcontent-%COMP%]{padding:1rem;border-radius:1rem}.card-day[_ngcontent-%COMP%]{border:1px solid var(--ion-color-gray);border-radius:1rem;box-shadow:0 .375rem 1rem #0000001a}.card-day[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:2rem;height:2rem}.list-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 1rem;--padding-end: 1rem;margin:0 .5rem 0 0}.list-filters[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover   ion-icon[slot=end][_ngcontent-%COMP%]{color:var(--ion-color-danger)}"]}),C})()}];let sn=(()=>{var r;class C{}return(r=C).\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[T.iI.forChild(cn),T.iI]}),C})();var gn=c(3890);let dn=(()=>{var r;class C{}return(r=C).\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[O.MD,l.YN,p.bv,sn,gn.x]}),C})()}}]);