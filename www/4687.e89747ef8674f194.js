"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4687],{4687:(fe,x,d)=>{d.r(x),d.d(x,{RequestServiceDetailPageModule:()=>ge});var P=d(177),$=d(9417),c=d(9465),f=d(7625),_=d(467),y=d(7762),q=d(5312),j=d(3801),C=d(5454),G=d(6471),N=d(9946),O=d(6431),A=d(6539),X=d(2313),p=d(8517),g=d(2021),I=d(3588),h=d(8833),e=d(4438),V=d(4842);const M=o=>({$implicit:o});function B(o,s){if(1&o&&(e.j41(0,"div",38),e.eu8(1,42),e.k0s()),2&o){const n=e.XpG(2),a=e.sdS(9);e.R7$(),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.eq3(2,M,n.requestService))}}function U(o,s){if(1&o&&(e.j41(0,"div",20)(1,"div",43)(2,"div",44)(3,"h6",35)(4,"b"),e.EFF(5,"Ghi ch\xfa c\u1ee7a kh\xe1ch kh\xe0ng"),e.k0s()(),e.nrm(6,"hr",36),e.j41(7,"div")(8,"b",37),e.EFF(9),e.k0s()()()()()),2&o){const n=e.XpG(2);e.R7$(9),e.JRh(n.requestService.Notes)}}function J(o,s){if(1&o&&(e.j41(0,"div",45)(1,"b",37),e.EFF(2),e.k0s()()),2&o){const n=e.XpG(3);e.R7$(2),e.JRh(n.requestService.AcceptNotes)}}function w(o,s){if(1&o&&(e.j41(0,"div",46),e.nrm(1,"ion-img",47),e.k0s()),2&o){const n=e.XpG(3);e.R7$(),e.Y8G("src",n.readfile_url+n.requestService.AcceptImages)}}function Y(o,s){if(1&o&&(e.j41(0,"div",20)(1,"div",43)(2,"div",44)(3,"h6",35)(4,"b"),e.EFF(5,"Ghi ch\xfa x\xe1c nh\u1eadn d\u1ecbch v\u1ee5"),e.k0s()(),e.nrm(6,"hr",36),e.DNE(7,J,3,1,"div",45)(8,w,2,1,"div",46),e.k0s()()()),2&o){const n=e.XpG(2);e.R7$(7),e.vxM(7,n.requestService.AcceptNotes?7:-1),e.R7$(),e.vxM(8,n.requestService.AcceptImages?8:-1)}}function L(o,s){if(1&o&&(e.j41(0,"div",45)(1,"b",37),e.EFF(2),e.k0s()()),2&o){const n=e.XpG(3);e.R7$(2),e.JRh(n.requestService.CancelReason)}}function z(o,s){if(1&o&&(e.j41(0,"div",46),e.nrm(1,"ion-img",47),e.k0s()),2&o){const n=e.XpG(3);e.R7$(),e.Y8G("src",n.readfile_url+n.requestService.CancelReasonImages)}}function H(o,s){if(1&o&&(e.j41(0,"div",20)(1,"div",43)(2,"div",44)(3,"h6",35)(4,"b"),e.EFF(5,"L\xfd do t\u1eeb ch\u1ed1i/h\u1ee7y d\u1ecbch v\u1ee5"),e.k0s()(),e.nrm(6,"hr",36),e.DNE(7,L,3,1,"div",45)(8,z,2,1,"div",46),e.k0s()()()),2&o){const n=e.XpG(2);e.R7$(7),e.vxM(7,n.requestService.CancelReason?7:-1),e.R7$(),e.vxM(8,n.requestService.CancelReasonImages?8:-1)}}function W(o,s){if(1&o&&(e.j41(0,"ion-select-option",55),e.EFF(1),e.k0s()),2&o){const n=s.$implicit;e.Y8G("value",n.RequestServiceCancelReasonId),e.R7$(),e.JRh(n.Reason)}}function K(o,s){if(1&o){const n=e.RV6();e.j41(0,"div",52)(1,"ion-item",53)(2,"ion-textarea",59),e.bIt("ionChange",function(i){e.eBV(n);const t=e.XpG(3);return e.Njj(t.changeReason(i))}),e.k0s()()()}if(2&o){const n=e.XpG(3);e.R7$(2),e.Y8G("autoGrow",!0)("value",n.dataForm.Reason)}}function Z(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-buttons",48)(6,"ion-button",49),e.bIt("click",function(){e.eBV(n),e.XpG();const i=e.sdS(75);return e.Njj(null==i?null:i.dismiss())}),e.nrm(7,"ion-icon",50),e.k0s()()()(),e.j41(8,"div",51)(9,"div",52)(10,"ion-item",53)(11,"ion-select",54),e.nI1(12,"translate"),e.nI1(13,"translate"),e.bIt("ionChange",function(i){e.eBV(n);const t=e.XpG(2);return e.Njj(t.changeRequestServiceCancelReason(i))}),e.Z7z(14,W,2,2,"ion-select-option",55,e.fX1),e.j41(16,"ion-select-option",55),e.EFF(17,"Kh\xe1c"),e.k0s()()()(),e.DNE(18,K,3,2,"div",52),e.k0s(),e.j41(19,"ion-footer")(20,"div",56)(21,"ion-button",57),e.bIt("click",function(){e.eBV(n),e.XpG();const i=e.sdS(75);return e.Njj(null==i?null:i.dismiss())}),e.j41(22,"ion-label"),e.EFF(23),e.nI1(24,"translate"),e.k0s()(),e.j41(25,"ion-button",58),e.bIt("click",function(i){e.eBV(n),e.XpG();const t=e.sdS(75),r=e.XpG();return e.Njj(r.declineService(i,t))}),e.j41(26,"ion-label"),e.EFF(27),e.nI1(28,"translate"),e.k0s()()()()}if(2&o){const n=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,9,"CancelService")),e.R7$(8),e.Y8G("value",n.dataForm.ReasonId)("cancelText",e.bMT(12,11,"Close"))("okText",e.bMT(13,13,"Apply")),e.R7$(3),e.Dyx(n.requestServiceCancelReasons),e.R7$(2),e.Y8G("value",-1),e.R7$(2),e.vxM(18,-1==n.dataForm.ReasonId?18:-1),e.R7$(5),e.JRh(e.bMT(24,15,"Cancel")),e.R7$(2),e.Y8G("disabled",n.declineService_Disabled),e.R7$(2),e.JRh(e.bMT(28,17,"Confirm"))}}function Q(o,s){if(1&o&&(e.j41(0,"div",63)(1,"ion-item",65)(2,"ion-radio",66),e.eu8(3,42),e.k0s()()()),2&o){const n=s.$implicit;e.XpG(3);const a=e.sdS(11);e.R7$(2),e.Y8G("value",n.UserId),e.R7$(),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.eq3(3,M,n))}}function ee(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",60),e.EFF(3,"Ch\u1ecdn nh\xe2n vi\xean"),e.k0s()()(),e.j41(4,"ion-content",61)(5,"ion-radio-group",62),e.bIt("ionChange",function(i){e.eBV(n);const t=e.XpG(2);return e.Njj(t.changeStaffUserId(i))}),e.Z7z(6,Q,4,5,"div",63,e.fX1),e.k0s()(),e.j41(8,"ion-footer")(9,"div",56)(10,"ion-button",57),e.bIt("click",function(){e.eBV(n),e.XpG();const i=e.sdS(78);return e.Njj(null==i?null:i.dismiss())}),e.j41(11,"ion-label"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.j41(14,"ion-button",64),e.bIt("click",function(i){e.eBV(n),e.XpG();const t=e.sdS(78),r=e.XpG();return e.Njj(r.assignService(i,t))}),e.j41(15,"ion-label"),e.EFF(16),e.nI1(17,"translate"),e.k0s()()()()}if(2&o){const n=e.XpG(2);e.R7$(5),e.Y8G("value",n.dataForm.StaffUserId),e.R7$(),e.Dyx(n.staffVehicleChargingWorkings),e.R7$(6),e.JRh(e.bMT(13,4,"Cancel")),e.R7$(2),e.Y8G("disabled",n.assignService_Disabled),e.R7$(2),e.JRh(e.bMT(17,6,"Confirm"))}}function te(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-footer",41)(1,"div",67)(2,"ion-button",68),e.bIt("click",function(){e.eBV(n),e.XpG();const i=e.sdS(75);return e.Njj(null==i?null:i.present())}),e.j41(3,"ion-label"),e.EFF(4,"T\u1eeb ch\u1ed1i"),e.k0s()(),e.j41(5,"ion-button",69),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.receiveService())}),e.j41(6,"ion-label"),e.EFF(7,"Nh\u1eadn d\u1ecbch v\u1ee5"),e.k0s()()()()}}function ie(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-footer",41)(1,"div",67)(2,"ion-button",69),e.bIt("click",function(i){e.eBV(n),e.XpG();const t=e.sdS(78),r=e.XpG();return r.changeRequestServiceId(i,r.requestService.RequestServiceId),e.Njj(null==t?null:t.present())}),e.j41(3,"ion-label"),e.EFF(4,"\u0110i\u1ec1u ph\u1ed1i d\u1ecbch v\u1ee5"),e.k0s()()()()}}function ne(o,s){if(1&o){const n=e.RV6();e.j41(0,"ion-content")(1,"ion-refresher",7),e.bIt("ionRefresh",function(i){e.eBV(n);const t=e.XpG();return e.Njj(t.onIonRefresher(i))}),e.nrm(2,"ion-refresher-content"),e.k0s(),e.j41(3,"div",8)(4,"div",9)(5,"div",10)(6,"div",11)(7,"h4",12)(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"div",13)(11,"small"),e.EFF(12),e.k0s()(),e.nrm(13,"hr",14),e.j41(14,"div",15)(15,"span",16)(16,"small"),e.EFF(17),e.nI1(18,"translate"),e.j41(19,"b"),e.EFF(20),e.k0s()()(),e.j41(21,"span",17)(22,"small"),e.EFF(23),e.nI1(24,"translate"),e.j41(25,"b"),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()()(),e.nrm(28,"div",18),e.k0s()()(),e.j41(29,"div",19)(30,"div",20)(31,"div",21)(32,"div",22)(33,"div",23)(34,"div",24)(35,"div",25)(36,"ion-chip",26),e.nrm(37,"ion-icon",27),e.j41(38,"ion-label"),e.EFF(39),e.k0s()()()()(),e.j41(40,"div",28)(41,"div",29)(42,"div",30)(43,"div"),e.nrm(44,"ion-img",31),e.k0s(),e.j41(45,"div",32)(46,"div",33),e.EFF(47),e.nI1(48,"translate"),e.k0s(),e.j41(49,"div")(50,"strong"),e.EFF(51),e.k0s(),e.j41(52,"small"),e.EFF(53),e.k0s()()()()(),e.j41(54,"div",34)(55,"h6",35)(56,"b"),e.EFF(57,"Th\u1eddi gian \u0111\u1eb7t l\u1ecbch"),e.k0s()(),e.nrm(58,"hr",36),e.j41(59,"div")(60,"b",37),e.EFF(61),e.k0s()()(),e.j41(62,"div",34)(63,"h6",35)(64,"b"),e.EFF(65,"Th\u1eddi gian th\u1ef1c hi\u1ec7n (d\u1ef1 ki\u1ebfn)"),e.k0s()(),e.nrm(66,"hr",36),e.j41(67,"div")(68,"b",37),e.EFF(69),e.k0s()()()()()(),e.DNE(70,B,2,4,"div",38),e.k0s(),e.DNE(71,U,10,1,"div",20)(72,Y,9,2,"div",20)(73,H,9,2,"div",20),e.k0s(),e.j41(74,"ion-modal",39,2),e.bIt("didPresent",function(i){e.eBV(n);const t=e.XpG();return e.Njj(t.onModalDeclineServiceDidPresent(i))}),e.DNE(76,Z,29,19,"ng-template"),e.k0s(),e.j41(77,"ion-modal",40,3),e.bIt("didPresent",function(i){e.eBV(n);const t=e.XpG();return e.Njj(t.onModalAssignServiceDidPresent(i))}),e.DNE(79,ee,18,8,"ng-template"),e.k0s()(),e.DNE(80,te,8,0,"ion-footer",41)(81,ie,5,0)}if(2&o){let n,a,i;const t=e.XpG();e.R7$(9),e.JRh(t.requestService.ServiceName),e.R7$(3),e.JRh(t.requestService.RequestAddress),e.R7$(5),e.SpI("",e.bMT(18,23,"YourWay")," "),e.R7$(3),e.SpI("",t.getDistance2CL()," km"),e.R7$(3),e.SpI("",e.bMT(24,25,"EstimatedTime")," "),e.R7$(3),e.Lme("",t.getTime2CL()," ",e.bMT(27,27,"Minute"),""),e.R7$(6),e.HbH("border-"+t.APP_FUNC_GetColor_VRequestStatus(t.requestService.VRequestStatus)),e.R7$(4),e.Y8G("color",t.APP_FUNC_GetColor_VRequestStatus(t.requestService.VRequestStatus)),e.R7$(3),e.JRh(t.requestService.VRequestStatusName),e.R7$(8),e.JRh(null!==(n=t.requestService.ChargePackageName)&&void 0!==n?n:e.bMT(48,29,"ChargingPackage")),e.R7$(4),e.SpI("",t.APP_FUNC_FormatMoney(null!==(a=t.requestService.PayValue)&&void 0!==a?a:0),"\u0111"),e.R7$(2),e.Lme(" /",t.requestService.PowerValue,"",null!==(i=t.requestService.Unit)&&void 0!==i?i:"kWh",""),e.R7$(8),e.JRh(t.APP_FUNC_FormatDate(t.requestService.RequestDate)),e.R7$(8),e.Lme("",t.APP_FUNC_FormatDate(t.requestService.ExecutionDate+" "+t.requestService.ExecutionTime,"DD/MM/YYYY, HH:mm")," - ",t.APP_FUNC_FormatDate(t.requestService.ExecutionDate+" "+t.requestService.ExecutionTimeTo,"HH:mm"),""),e.R7$(),e.vxM(70,t.requestService.StaffUserId?70:-1),e.R7$(),e.vxM(71,t.requestService.Notes?71:-1),e.R7$(),e.vxM(72,t.requestService.AcceptNotes||t.requestService.AcceptImages?72:-1),e.R7$(),e.vxM(73,t.requestService.CancelReason||t.requestService.CancelReasonImages?73:-1),e.R7$(7),e.vxM(80,t.requestService.VRequestStatus==t.v_request_status.ChoXacNhan?80:t.requestService.VRequestStatus==t.v_request_status.YeuCauDichVu&&t.isStaffLead?81:-1)}}function oe(o,s){if(1&o&&(e.j41(0,"div",70)(1,"div",71)(2,"div",72)(3,"b",73),e.EFF(4,"Chi ti\u1ebft d\u1ecbch v\u1ee5"),e.k0s()()(),e.nrm(5,"hr",74),e.j41(6,"div",75)(7,"table",76)(8,"tr")(9,"td"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"td")(13,"b"),e.EFF(14),e.k0s()()(),e.j41(15,"tr")(16,"td"),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.j41(19,"td")(20,"b"),e.EFF(21),e.k0s()()(),e.j41(22,"tr")(23,"td"),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.j41(26,"td")(27,"b"),e.EFF(28),e.k0s()()(),e.j41(29,"tr")(30,"td"),e.EFF(31),e.nI1(32,"translate"),e.k0s(),e.j41(33,"td")(34,"b"),e.EFF(35),e.k0s()()()()()()),2&o){const n=s.$implicit;e.R7$(10),e.JRh(e.bMT(11,8,"Employe")),e.R7$(4),e.JRh(n.StaffFullName),e.R7$(3),e.JRh(e.bMT(18,10,"CarBrand")),e.R7$(4),e.JRh(n.CarBrand),e.R7$(3),e.JRh(e.bMT(25,12,"ModelName")),e.R7$(4),e.JRh(n.ModelName),e.R7$(3),e.JRh(e.bMT(32,14,"VehicleNumber")),e.R7$(4),e.JRh(n.VehicleNumber)}}function ae(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&o){const n=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"CarBrand")),e.R7$(4),e.JRh(n.CarBrand)}}function re(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&o){const n=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"ModelName")),e.R7$(4),e.JRh(n.ModelName)}}function le(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&o){const n=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"VehicleNumber")),e.R7$(4),e.JRh(n.VehicleNumber)}}function se(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&o){const n=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"Vin")),e.R7$(4),e.JRh(n.Vin)}}function ce(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s()()()),2&o){const n=e.XpG().$implicit;e.R7$(2),e.JRh(e.bMT(3,2,"YearOfManufacture")),e.R7$(4),e.JRh(n.YearOfManufacture)}}function de(o,s){if(1&o&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"td")(5,"b"),e.EFF(6),e.k0s(),e.EFF(7," / "),e.j41(8,"b",82),e.EFF(9),e.k0s()()()),2&o){let n,a,i;const t=e.XpG().$implicit,r=e.XpG();e.R7$(2),e.JRh(e.bMT(3,5,"PinStatus")),e.R7$(3),e.HbH(r.colorPin(null!==(n=t.RemainPowerPercent)&&void 0!==n?n:0)),e.R7$(),e.SpI("",null!==(a=t.RemainPowerPercent)&&void 0!==a?a:0,"%"),e.R7$(3),e.SpI("",null!==(i=t.RemainPowerPercent)&&void 0!==i?i:0," kWh")}}function ue(o,s){if(1&o&&(e.j41(0,"div",77)(1,"div",71)(2,"div",72)(3,"b",73),e.EFF(4),e.k0s()()(),e.nrm(5,"hr",78),e.j41(6,"div",79)(7,"div",80),e.EFF(8),e.k0s()(),e.j41(9,"div",75)(10,"table",76),e.DNE(11,ae,7,4,"tr",81)(12,re,7,4,"tr",81)(13,le,7,4,"tr",81)(14,se,7,4,"tr",81)(15,ce,7,4,"tr",81)(16,de,10,7,"tr",81),e.k0s()()()),2&o){const n=s.$implicit;e.R7$(4),e.JRh(n.StaffFullName),e.R7$(4),e.JRh(n.StartLocation),e.R7$(3),e.Y8G("ngIf",n.CarBrand),e.R7$(),e.Y8G("ngIf",n.ModelName),e.R7$(),e.Y8G("ngIf",n.VehicleNumber),e.R7$(),e.Y8G("ngIf",n.Vin),e.R7$(),e.Y8G("ngIf",n.YearOfManufacture),e.R7$(),e.Y8G("ngIf",n.IsMobileStation)}}const ve=[{path:"",component:(()=>{var o;class s{constructor(a,i,t,r,l,u){var m;this.router=a,this.activatedRoute=i,this.modalController=t,this.animationController=r,this.toastController=l,this.loadingController=u,this.APP_ROUTE=h._,this.APP_FUNC_FormatDate=p.Rv,this.APP_FUNC_FormatMoney=p.xi,this.APP_FUNC_GetColor_VRequestStatus=p.rZ,this.v_request_status=I.Gz,this.readfile_url=q.c.readfile_url,this.requestServiceCancelReasons=[],this.dataForm={},this.staffVehicleChargingWorkings=[];let v=null!==(m=i.snapshot.params.id)&&void 0!==m?m:"";v&&(this.RequestServiceId=parseFloat(v))}ngOnInit(){var a=this;this.IsOnInit=!0,(0,_.A)(function*(){(yield(0,A.kU)())&&a.refreshData(()=>{var i;(null===(i=a.requestService)||void 0===i?void 0:i.VRequestStatus)==I.Gz.YeuCauDichVu&&(0,N.z)({callback:t=>{var r,l;null!=t&&t.Succeeded&&(a.user=null!==(r=t.Data)&&void 0!==r?r:{},a.isStaffLead=!(null===(l=a.user)||void 0===l||null===(l=l.Roles)||void 0===l||!l.find(u=>u.Name==X.BF.Coordinator)))}})})})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.refreshData()}onIonRefresher(a){this.refreshData(()=>{a.target.complete()})}refreshData(a){var i=this;return(0,_.A)(function*(){(0,C.K5)({params:{RequestServiceId:i.RequestServiceId},callback:t=>{var r,l,u,m,v,R;i.response=t,null!=t&&t.Succeeded?(i.requestService=null!==(r=t.Data)&&void 0!==r?r:{},i.customerPosition={lat:null!==(l=null===(u=i.requestService)||void 0===u?void 0:u.RequestLat)&&void 0!==l?l:0,lng:null!==(m=null===(v=i.requestService)||void 0===v?void 0:v.RequestLong)&&void 0!==m?m:0},null!==(R=i.requestService)&&void 0!==R&&R.RequestProcessedId&&i.navigateByUrl(h._.REQUEST_PROCESSED_DETAIL.replace(":id",i.requestService.RequestProcessedId.toString()))):((0,g.cX)(i.toastController,{},t).then(S=>S.present()),i.navigateByUrl(h._.DEFAULT)),a&&a()}})})()}initMap(){var a=this;const i=function(){var r=(0,_.A)(function*(){let l,u,v=window.google.maps;const{Map:R}=yield v.importLibrary("maps"),{AdvancedMarkerElement:S}=yield v.importLibrary("marker");let b=new R(document.getElementById("map"),{zoom:12,center:a.customerPosition,disableDefaultUI:!0,mapId:"DEMO_MAP_ID"});a.customerPosition&&(l=new S({map:b,position:a.customerPosition,title:"V\u1ecb tr\xed kh\xe1ch h\xe0ng \u0111\u1eb7t l\u1ecbch"})),a.employePosition&&(u=new S({map:b,position:a.employePosition,title:"V\u1ecb tr\xed nh\xe2n vi\xean iSAC"})),a.customerPosition&&a.employePosition&&setTimeout(()=>{var F,E,D,k,pe=v.DirectionsService(),T=v.DirectionsRenderer();T.setMap(b),pe.route({origin:v.LatLng(null===(F=a.employePosition)||void 0===F?void 0:F.lat,null===(E=a.employePosition)||void 0===E?void 0:E.lng),destination:v.LatLng(null===(D=a.customerPosition)||void 0===D?void 0:D.lat,null===(k=a.customerPosition)||void 0===k?void 0:k.lng),travelMode:"DRIVING"},function(he,Re){"OK"==Re&&T.setDirections(he)})},1e3)});return function(){return r.apply(this,arguments)}}();window.initMap=i;let t=document.createElement("script");t.async=!0,t.src=`https://maps.google.com/maps/api/js?key=${q.c.apiKey}&libraries=places,marker,routes&callback=initMap&loading=async`,document.head.append(t)}refreshCurrentPosition(a){var i=this;return(0,_.A)(function*(){let t=()=>{(0,j.Xz)().then(r=>{i.employePosition=r,a&&a()})};y.L.getCurrentPosition({enableHighAccuracy:!0}).then(function(){var r=(0,_.A)(function*(l){if(l.coords){var u={lat:l.coords.latitude,lng:l.coords.longitude};yield(0,j.fj)({params:u})}t()});return function(l){return r.apply(this,arguments)}}()).catch(()=>{t()})})()}navigateByUrl(a){this.router.navigateByUrl(a,{replaceUrl:!0})}getDistance2CL(){return this.employePosition&&this.customerPosition?(0,p.Rw)((0,p.GH)(this.employePosition,this.customerPosition),10):0}getTime2CL(){return this.employePosition&&this.customerPosition?(0,p.Rw)(3*(0,p.GH)(this.employePosition,this.customerPosition),1):0}colorPin(a){return a<=20?"text-danger":a<=50?"text-warning":"text-success"}receiveService(a){var i=this;return(0,_.A)(function*(){var t;(0,g.Yy)(i.modalController,i.animationController,{selectedId:null===(t=i.requestService)||void 0===t?void 0:t.RequestServiceId,message:{TitleConfirm:"Nh\u1eadn d\u1ecbch v\u1ee5",Color:"primary"},fnConfirm:r=>{(0,C.c5)({loadingController:i.loadingController,params:{RequestServiceId:r},callback:l=>{null!=l&&l.Succeeded&&l.Data?i.navigateByUrl(h._.REQUEST_PROCESSED_DETAIL.replace(":id",l.Data)):(0,g.cX)(i.toastController,{},l).then(u=>u.present())}})}})})()}onModalDeclineServiceDidPresent(a){var i=this;return(0,_.A)(function*(){var t;(0,G.z)({loadingController:i.loadingController,params:{ServiceId:null===(t=i.requestService)||void 0===t?void 0:t.ServiceId,IsReasonForCustomer:!1,PageNumber:1,PageSize:100},callback:r=>{var l;null!=r&&r.Succeeded?i.requestServiceCancelReasons=null!==(l=r.Data)&&void 0!==l?l:[]:(0,g.cX)(i.toastController,{},r).then(u=>u.present())}})})()}changeRequestServiceCancelReason(a){var i=this;return(0,_.A)(function*(){i.dataForm.ReasonId=a.detail.value})()}changeReason(a){var i=this;return(0,_.A)(function*(){var t;i.dataForm.Reason=null===(t=a.detail.value)||void 0===t?void 0:t.trim()})()}get declineService_Disabled(){var a;return!(null!==(a=this.requestServiceCancelReasons.find(i=>i.RequestServiceCancelReasonId==this.dataForm.ReasonId))&&void 0!==a&&a.Reason||this.dataForm.Reason)}declineService(a,i){var t=this;return(0,_.A)(function*(){var r,l,u;(0,C.nj)({loadingController:t.loadingController,params:{RequestServiceId:null===(r=t.requestService)||void 0===r?void 0:r.RequestServiceId,Reason:null!==(l=null===(u=t.requestServiceCancelReasons.find(m=>m.RequestServiceCancelReasonId==t.dataForm.ReasonId))||void 0===u?void 0:u.Reason)&&void 0!==l?l:t.dataForm.Reason},callback:m=>{null!=m&&m.Succeeded?(null==i||i.dismiss(),t.navigateByUrl(h._.DEFAULT),(0,g.cX)(t.toastController,{color:"danger",message:"\u0110\xe3 t\u1eeb ch\u1ed1i nh\u1eadn d\u1ecbch v\u1ee5"}).then(v=>v.present())):(0,g.cX)(t.toastController,{},m).then(v=>v.present())}})})()}changeRequestServiceId(a,i){var t=this;return(0,_.A)(function*(){t.dataForm.RequestServiceId=null!=i?i:a.detail.value})()}changeStaffUserId(a){var i=this;return(0,_.A)(function*(){i.dataForm.StaffUserId=a.detail.value})()}onModalAssignServiceDidPresent(a){(0,O.P6)({loadingController:this.loadingController,params:{PageNumber:1,PageSize:100},callback:i=>{var t;null!=i&&i.Succeeded?this.staffVehicleChargingWorkings=null!==(t=i.Data)&&void 0!==t?t:[]:(0,g.cX)(this.toastController,{},i).then(r=>r.present())}})}get assignService_Disabled(){return!this.dataForm.RequestServiceId||!this.dataForm.StaffUserId}assignService(a,i){var t=this;return(0,_.A)(function*(){t.assignService_Disabled||(0,C.wP)({params:{RequestServiceId:t.dataForm.RequestServiceId,StaffUserId:t.dataForm.StaffUserId},callback:r=>{null!=r&&r.Succeeded?(null==i||i.dismiss(),t.navigateByUrl(h._.DEFAULT)):(0,g.cX)(t.toastController,{},r).then(l=>l.present())}})})()}}return(o=s).\u0275fac=function(a){return new(a||o)(e.rXU(f.Ix),e.rXU(f.nX),e.rXU(c.W3),e.rXU(c.Hx),e.rXU(c.K_),e.rXU(c.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-request-service-detail"]],decls:12,vars:5,consts:[["templateVehicle",""],["templateStaff",""],["modalDeclineService",""],["modalAssignService",""],["color","primary"],["slot","start"],["icon","../../../assets/icon/ion-icon/arrow-left.svg","text","",3,"defaultHref"],["slot","fixed",3,"ionRefresh"],[1,"bg-primary"],[1,"container","card-location","text-white","pb-2"],[1,"row"],[1,"col-auto"],[1,"d-flex","align-items-center","my-0"],[1,"d-flex","align-items-center","mt-1"],[1,"border-gray","mt-2","mb-1"],[1,"text-right","text-nowrap"],[1,"mr-4"],[1,"d-inline-block"],[1,"col","p-0"],[1,"container"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-6","mt-3","mb-4","d-flex","flex-column"],[1,"flex-grow-1","card-day","d-flex","flex-column","rounded","bg-white","border","mt-3"],[1,"flex-grow-1"],[1,"d-flex","justify-content-center"],[1,"card-status"],[1,"no-opacity",3,"color"],["src","../../../assets/icon/tabs/service.svg"],[1,"p-2"],[1,"card-package","rounded","border","d-flex","align-items-stretch","p-2"],[1,"d-flex","align-items-center"],["src","../../../assets/icon/ion-img/charge-package.svg"],[1,"align-self-stretch","pl-2","d-flex","flex-column","justify-content-between"],[1,"text-muted","fs-3"],[1,"card-day","bg-white","p-2","mt-3"],[1,"m-0"],[1,"border-dashed","mt-2","mb-3"],[1,"text-medium"],[1,"col-12","col-lg-6","mb-4","mt-lg-4","pt-2"],[1,"ion-modal-auto",3,"didPresent"],[3,"didPresent"],[1,"ion-padding-vertical"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"col-12","col-lg-6","mb-4"],[1,"card-day","rounded","bg-white","p-3"],[1,"mb-3"],[1,"card-day","rounded","bg-white","mt-2"],[3,"src"],["slot","end"],[3,"click"],["name","close-outline",1,"fs-24"],[1,"ion-padding","mb-4"],[1,"mt-3","ion-item-input"],["lines","none"],["placeholder","Ch\u1ecdn l\xed do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5","interface","action-sheet",3,"ionChange","value","cancelText","okText"],[3,"value"],[1,"d-flex","p-2"],["fill","outline","color","medium","expand","block","shape","round",1,"flex-grow-1","m-1",3,"click"],["color","danger","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click","disabled"],["maxlength","250","placeholder","Nh\u1eadp l\xed do t\u1eeb ch\u1ed1i d\u1ecbch v\u1ee5!",3,"ionChange","autoGrow","value"],[1,"text-center"],[1,"ion-padding-horizontal"],[3,"ionChange","value"],[1,"vehicle-charging","mb-3"],["color","primary","shape","round","expand","block",1,"flex-grow-1","m-1",3,"click","disabled"],["lines","none","detail","false","button","","mode","ios"],["mode","md","justify","space-between",3,"value"],[1,"container","d-flex","align-items-center","justify-content-between"],["color","danger","shape","round","expand","block",1,"m-1","flex-grow-1",3,"click"],["color","primary","shape","round","expand","block",1,"m-1","flex-grow-1",3,"click"],[1,"card-vehicle","h-100","bg-white","rounded","p-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-ellipsis"],[1,"mr-1"],[1,"mt-2","mb-2"],[1,"d-flex","align-items-start"],[1,"table","table-borderless","m-0"],[1,"card-vehicle","h-100"],[1,"mt-2","mb-1"],[1,"mb-3","fs-12"],[1,"text-wrap"],[4,"ngIf"],[1,"text-muted"]],template:function(a,i){1&a&&(e.j41(0,"ion-header",4)(1,"ion-toolbar")(2,"ion-buttons",5),e.nrm(3,"ion-back-button",6),e.k0s(),e.j41(4,"ion-title"),e.EFF(5),e.nI1(6,"translate"),e.k0s()()(),e.DNE(7,ne,82,31)(8,oe,36,16,"ng-template",null,0,e.C5r)(10,ue,17,8,"ng-template",null,1,e.C5r)),2&a&&(e.R7$(3),e.Y8G("defaultHref",i.APP_ROUTE.DEFAULT),e.R7$(2),e.JRh(e.bMT(6,3,"ServiceDetail")),e.R7$(2),e.vxM(7,i.requestService?7:-1))},dependencies:[P.bT,P.T3,c.Jm,c.QW,c.ZB,c.W9,c.M0,c.eU,c.iq,c.KW,c.uz,c.he,c.KO,c.f0,c.To,c.Ki,c.Nm,c.Ip,c.nc,c.BC,c.ai,c.Sb,c.Je,c.Gw,c.el,V.D9],styles:[".card-location[_ngcontent-%COMP%]{position:relative;z-index:1;background-image:url(bg-charging-location.24bf138423cec5f5.svg);background-repeat:no-repeat;background-position:top center;background-size:auto 100%}.card-location.rounded[_ngcontent-%COMP%]{border-top-left-radius:1.5rem!important;border-top-right-radius:1.5rem!important}.card-location[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 5rem;--border-radius: .5rem;border:1px solid var(--ion-color-light)}.card-location[_ngcontent-%COMP%]   .icon-w24[_ngcontent-%COMP%]{display:inline-block;width:24px}.card-location[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}#map[_ngcontent-%COMP%]{width:100%;height:100%}.card-day.rounded[_ngcontent-%COMP%], .card-day.rounded[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-day[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]{margin-top:-1rem}.card-day[_ngcontent-%COMP%]   .card-package[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3rem}.card-day[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{border-radius:.5rem;overflow:hidden}.card-vehicle.rounded[_ngcontent-%COMP%]{border-radius:1rem!important}.card-vehicle[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-style:dashed!important}.card-vehicle[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2rem;height:2rem;min-width:2rem;min-height:2rem;--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;--border-radius: .5rem}.card-vehicle[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:3rem}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{table-layout:fixed;font-size:.875rem}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem;vertical-align:top}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{width:40%;padding-left:0;padding-right:.5rem;color:var(--ion-color-medium-shade)}.card-vehicle[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{padding-left:.5rem;padding-right:0;text-align:right}"]}),s})()}];let me=(()=>{var o;class s{}return(o=s).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[f.iI.forChild(ve),f.iI]}),s})();var _e=d(3664);let ge=(()=>{var o;class s{}return(o=s).\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[P.MD,$.YN,c.bv,me,_e.x]}),s})()}}]);